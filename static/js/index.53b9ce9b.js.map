{"version":3,"file":"static/js/index.53b9ce9b.js","sources":["webpack://frontend-prod/../../utils/react/define-react.ts","webpack://frontend-prod/../../../../backend/utils/src/wait-until.ts","webpack://frontend-prod/../../utils/react/define-window.ts","webpack://frontend-prod/../../utils/react/use-global.ts","webpack://frontend-prod/../../utils/react/define-store.tsx","webpack://frontend-prod/./root/window.ts","webpack://frontend-prod/./loader/base.tsx","webpack://frontend-prod/../../utils/react/use-local.ts","webpack://frontend-prod/../../utils/ui/loading.tsx","webpack://frontend-prod/../../utils/types/general.ts","webpack://frontend-prod/../../base/load/proxy.ts","webpack://frontend-prod/../../base/load/api/api-proxy-def.tsx","webpack://frontend-prod/../../base/load/api/api-proxy.tsx","webpack://frontend-prod/../../base/load/db/db-proxy.tsx","webpack://frontend-prod/./loader/route.tsx","webpack://frontend-prod/./loader/page.tsx","webpack://frontend-prod/./react/store.tsx","webpack://frontend-prod/../vi/lib/error-box.tsx","webpack://frontend-prod/../vi/lib/init-vi.tsx","webpack://frontend-prod/../vi/lib/store.tsx","webpack://frontend-prod/../vi/lib/comp-args.tsx","webpack://frontend-prod/../vi/lib/responsive-val.ts","webpack://frontend-prod/../../utils/css/advanced.ts","webpack://frontend-prod/../../utils/css/background.ts","webpack://frontend-prod/../../utils/css/border.ts","webpack://frontend-prod/../../utils/css/dimension.ts","webpack://frontend-prod/../../utils/css/editor.ts","webpack://frontend-prod/../../utils/css/font.ts","webpack://frontend-prod/../../utils/css/layout.ts","webpack://frontend-prod/../../utils/css/padding.ts","webpack://frontend-prod/../../utils/css/gen.ts","webpack://frontend-prod/../vi/lib/gen-parts.tsx","webpack://frontend-prod/../vi/vi-child.tsx","webpack://frontend-prod/../ed/crdt/node/rapidhash.ts","webpack://frontend-prod/../vi/lib/parent-comp-args.ts","webpack://frontend-prod/../vi/lib/script-args.tsx","webpack://frontend-prod/../vi/script/vi-if.tsx","webpack://frontend-prod/../vi/script/vi-local-auto-render.tsx","webpack://frontend-prod/../vi/script/vi-local.tsx","webpack://frontend-prod/../vi/script/vi-loop.tsx","webpack://frontend-prod/../vi/script/vi-pass-prop.tsx","webpack://frontend-prod/../vi/vi-script.tsx","webpack://frontend-prod/../vi/vi-item.tsx","webpack://frontend-prod/../vi/vi-comp.tsx","webpack://frontend-prod/../vi/vi-render.tsx","webpack://frontend-prod/../vi/vi-page.tsx","webpack://frontend-prod/../vi/vi-root.tsx","webpack://frontend-prod/./react/router.tsx","webpack://frontend-prod/./react/entry.tsx","webpack://frontend-prod/./root/main.tsx"],"sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport JSXDevRuntime from \"react/jsx-dev-runtime\";\nimport JSXRuntime from \"react/jsx-runtime\";\n\nexport const defineReact = () => {\n  const w = typeof window === \"object\" ? window : (globalThis as any);\n\n  w.React = React;\n  w.ReactDOM = ReactDOM;\n  w.JSXRuntime = JSXRuntime;\n  w.JSXDevRuntime = JSXDevRuntime;\n  w.JSXDevRuntime.jsxDEV = JSXRuntime.jsx;\n\n  w.Fragment = React.Fragment;\n};\n","export const waitUntil = (\n  condition: number | (() => any),\n  arg?: { timeout?: number; interval?: number }\n) => {\n  return new Promise<void>(async (resolve) => {\n    if (typeof condition === \"function\") {\n      let tout = null as any;\n      if (arg?.timeout) {\n        tout = setTimeout(resolve, arg?.timeout);\n      }\n      if (await condition()) {\n        clearTimeout(tout);\n        resolve();\n        return;\n      }\n      let count = 0;\n      const c = setInterval(async () => {\n        if (await condition()) {\n          if (tout) clearTimeout(tout);\n          clearInterval(c);\n          resolve();\n        }\n        if (count > 100) {\n          clearInterval(c);\n        }\n      }, arg?.interval || 10);\n    } else if (typeof condition === \"number\") {\n      setTimeout(() => {\n        resolve();\n      }, condition);\n    }\n  });\n};\n","import { css, extractCss } from \"goober\";\nimport { waitUntil } from \"prasi-utils\";\nimport { snapshot } from \"valtio\";\n\nexport const defineWindow = async (awaitServerUrl = true) => {\n  let w = typeof window === \"object\" ? window : (globalThis as any);\n\n  if (awaitServerUrl) await waitUntil(() => w.__SRV_URL__);\n\n  w.process = { env: { NODE_ENV: \"production\" } };\n  w.prasiContext = {\n    global: {},\n    render() {},\n  };\n\n  const location = window[\"location\"];\n\n  const host =\n      0 === location.protocol.indexOf(\"http\") ? location.hostname : \"localhost\",\n    scheme =\n      \"https:\" != location.protocol || /localhost|127.0.0.1|0.0.0.0/.test(host)\n        ? \"http\"\n        : \"https\";\n\n  if (w.__SRV_URL__) {\n    w.serverurl = w.__SRV_URL__;\n    const serverURL = new URL(w.serverurl);\n    if (\n      serverURL.hostname === \"localhost\" ||\n      serverURL.hostname === \"127.0.0.1\"\n    ) {\n      serverURL.hostname = location.hostname;\n      serverURL.pathname = serverURL.pathname === \"/\" ? \"\" : serverURL.pathname;\n      w.serverurl = serverURL.toString();\n      if (w.serverurl.endsWith(\"/\")) {\n        w.serverurl = w.serverurl.substring(0, w.serverurl.length - 1);\n      }\n    }\n  }\n\n  const port = location.port;\n  w.baseurl = scheme + \"://\" + host + (port ? \":\" + port : \"\") + \"/\";\n  if (!w.basepath) {\n    w.basepath = \"/\";\n  }\n  w.css = css;\n  w.extractCss = extractCss;\n  w.pathname = location.pathname;\n\n  w.cx = (...classNames: any[]) => {\n    const result: string[] = [];\n\n    classNames\n      .filter((e) => {\n        if (e) {\n          if (typeof e === \"string\" && e.trim()) return true;\n          else return true;\n        }\n        return false;\n      })\n      .forEach((e) => {\n        if (Array.isArray(e)) {\n          for (const f of e) {\n            if (typeof f === \"string\" && f.trim()) {\n              result.push(f.trim());\n            }\n          }\n        } else {\n          if (typeof e === \"string\") {\n            result.push(e.trim());\n          }\n        }\n      });\n    return result.join(\" \");\n  };\n\n  w.navigate = (href: string) => {\n    if (w.isEditor) {\n      return;\n    }\n    let _href = href;\n\n    if (typeof w.navigateOverride === \"function\") {\n      _href = w.navigateOverride(href);\n      if (!_href) return null;\n    }\n\n    history.pushState({ prevUrl: window.location.href }, \"\", _href);\n    w.pathname = href;\n\n    if (w.prasiContext && w.prasiContext.render) {\n      w.prasiContext.render();\n    }\n  };\n\n  if (typeof window === \"object\") {\n    window.addEventListener(\"popstate\", () => {\n      const sw = navigator.serviceWorker.controller;\n      if (sw) {\n        sw.postMessage({\n          type: \"add-cache\",\n          url: location.href,\n        });\n      }\n      if (w.prasiContext.popState) {\n        w.prasiContext.popState();\n        return;\n      }\n\n      if (w.preventPopRender) {\n        w.preventPopRender = false;\n        return;\n      }\n      if (w.prasiContext && w.prasiContext.render) {\n        w.pathname = location.pathname;\n        w.prasiContext.render();\n      }\n    });\n  }\n};\n","import {\n  createContext,\n  startTransition,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\nexport const GlobalContext = createContext({\n  global: {},\n  render: () => {},\n} as {\n  global: Record<string, any>;\n  render: (reset?: boolean) => void;\n});\nimport decircular from \"decircular\";\n\nexport const uState = useState;\nexport const useGlobal = <T extends object>(\n  defaultValue: T,\n  id: string\n): T & { render: (reset?: boolean) => void } => {\n  const ctx = useContext(GlobalContext);\n  const { global, render } = ctx;\n\n  if (!global[id]) {\n    global[id] = defaultValue;\n  }\n\n  useEffect(() => {\n    let res: any = null;\n    return () => {\n      if (typeof res === \"function\") res();\n      else if (res instanceof Promise) {\n        res.then((e) => {\n          if (typeof e === \"function\") e();\n        });\n      }\n    };\n  }, []);\n\n  const res = global[id];\n\n  if (res) {\n    res.render = (reset?: boolean) => {\n      if (reset) {\n        global[id] = undefined;\n      }\n      startTransition(render);\n    };\n  }\n\n  return res as any;\n};\n\nexport const deepClone = decircular;\n","import { createContext, useContext, useEffect, useRef, useState } from \"react\";\nimport { proxy, Snapshot, useSnapshot } from \"valtio\";\nimport { deepClone } from \"./use-global\";\n\nconst default_ctx = { ctx: {} as any, render() {} };\nconst store_ctx = createContext<{\n  ctx: Record<string, { ref: any; state: any }>;\n  render: () => void;\n}>(default_ctx);\n\nexport const StoreProvider = ({ children }: { children: any }) => {\n  const [_, render] = useState({});\n\n  return (\n    <store_ctx.Provider\n      value={{\n        ...default_ctx,\n        render() {\n          render({});\n        },\n      }}\n    >\n      {children}\n    </store_ctx.Provider>\n  );\n};\n\nexport const rawStore = function <T>(name: string) {\n  return () => default_ctx.ctx[name] as { state: any; ref: any };\n};\n\nexport const defineStore = function <\n  R,\n  T extends object,\n  K extends { [V in string]: (...arg: any[]) => void | boolean },\n  D,\n>(init: {\n  name: string;\n  state: T;\n  ref?: R;\n  action: (arg: {\n    ref: R;\n    state: T;\n    update: (fn: (state: T) => void) => void;\n  }) => K;\n  effect?: (arg: { state: Snapshot<T> }) => {\n    deps: any[];\n    effect: (arg: {\n      state: Snapshot<T>;\n      action: K;\n      update: (fn: (state: T) => void) => void;\n    }) => Promise<void>;\n    cleanup?: () => void;\n  }[];\n}) {\n  return <Z extends object>(\n    selector: (arg: { ref: R; state: Snapshot<T>; action: K }) => Z,\n    instance_name?: string\n  ) => {\n    const name = init.name + (instance_name ? `-${instance_name}` : ``);\n    const internal = useRef({\n      mounted: true,\n    });\n\n    const store = useContext(store_ctx);\n    const init_ctx = store.ctx;\n    if (!init_ctx[name] && init.state) {\n      init_ctx[name] = {\n        state: proxy(init.state),\n        ref: deepClone(init.ref || {}),\n      };\n    }\n    const ctx = init_ctx[name];\n\n    const ref = ctx.ref;\n    const state = useSnapshot(ctx.state);\n    const selection = selector({\n      ref,\n      state,\n      action: createAction(ref, ctx.state, init),\n    }) as Z & {\n      update: (fn: (state: T) => void) => void;\n    };\n\n    selection.update = (fn) => {\n      fn(ctx.state);\n    };\n\n    if (init.effect) {\n      const effects = init.effect({ state: ctx.state });\n\n      for (const e of effects) {\n        useEffect(() => {\n          internal.current.mounted = true;\n          e.effect({\n            action: createAction(ref, ctx.state, init),\n            state: ctx.state,\n            update(fn) {\n              fn(ctx.state);\n            },\n          });\n          return () => {\n            internal.current.mounted = false;\n            if (e.cleanup) {\n              e.cleanup();\n            }\n          };\n        }, e.deps);\n      }\n    }\n\n    useEffect(() => {\n      internal.current.mounted = true;\n      return () => {\n        internal.current.mounted = false;\n      };\n    }, Object.values(selection));\n\n    return { ...selection };\n  };\n};\n\nconst createAction = (\n  ref: any,\n  state: any,\n  init: {\n    action: (arg: {\n      state: any;\n      ref: any;\n      update: (fn: (state: any) => void) => void;\n    }) => any;\n  }\n) => {\n  return new Proxy(\n    {},\n    {\n      get(target, p, receiver) {\n        return function (...arg: any[]) {\n          const actions = init.action({\n            ref,\n            state,\n            update(fn) {\n              fn(state);\n            },\n          });\n\n          actions[p].bind(createAction(ref, state, init))(...arg);\n        };\n      },\n    }\n  ) as any;\n};\n\n// type Path = (string | symbol)[];\n\n// interface DeepProxy {\n//   __path: Path[];\n//   [key: string]: any;\n// }\n\n// function createDeepProxy(): DeepProxy {\n//   const root = {};\n\n//   const paths = {} as Record<string, { __path: Path }>;\n\n//   const handler: ProxyHandler<object> = {\n//     get(target: any, prop: string | symbol, receiver: any) {\n//       if (target === root) {\n//         const id = createId();\n//         paths[id] = { __path: [prop] };\n//         return new Proxy(paths[id], handler);\n//       }\n\n//       if (prop === \"__path\") {\n//         return target.__path;\n//       }\n//       target.__path.push(prop);\n\n//       return new Proxy(target, handler);\n//     },\n//   };\n\n//   return new Proxy(root, handler) as DeepProxy;\n// }\n// function cleanArray(arr: Path[]): Path[] {\n//   const result: Path[] = [];\n//   let currentGroup: Path | null = null;\n\n//   for (const subArr of arr) {\n//     if (!currentGroup) {\n//       currentGroup = subArr; // Start a new group\n//     } else if (subArr[0] === currentGroup[0]) {\n//       // If it starts with the same character, keep adding\n//       currentGroup = subArr;\n//     } else {\n//       // Save the current group and start a new one\n//       result.push(currentGroup);\n//       currentGroup = subArr;\n//     }\n//   }\n\n//   if (currentGroup) {\n//     result.push(currentGroup); // Append the last group\n//   }\n\n//   return result;\n// }\n","import { FC } from \"react\";\nimport { EPage } from \"../../ed/logic/types\";\nimport { IItem } from \"../../../utils/types/item\";\n\nexport const w = window as unknown as {\n  prasiContext: {\n    global: any;\n    render: () => void;\n  };\n  params: any;\n  navigateOverride: (href: string) => void;\n  pointerActive: boolean;\n  ContentLoading?: FC;\n  ContentNotFound?: FC;\n  _prasi: {\n    basepath: string;\n    site_id: string;\n    page_id?: string;\n    params?: any;\n    routed?: {\n      page_id?: string;\n      params?: any;\n    };\n  };\n  serverurl: string;\n  siteurl: (pathname: string, forceOriginal?: boolean) => string;\n  isEditor: boolean;\n  isMobile: boolean;\n  isDesktop: boolean;\n  preloaded: (url: string) => boolean;\n  preload: (\n    urls: string[],\n    opt: {\n      on_load: (\n        pages: {\n          id: string;\n          url: string;\n          content_tree: EPage[\"content_tree\"];\n        }[],\n        walk: (\n          root: { content_tree: EPage[\"content_tree\"] }[],\n          visit: (item: IItem) => void | Promise<void>\n        ) => void\n      ) => void;\n    }\n  ) => Promise<void>;\n};\n","import { w } from \"prod/root/window\";\n\nexport const base = {\n  root: null as unknown as URL,\n  url(...arg: any[]) {\n    const pathname = arg\n      .map((e) => (Array.isArray(e) ? e.join(\"\") : e))\n      .join(\"\");\n\n    let base_url = this.root.toString();\n\n    if (base_url.endsWith(\"/\"))\n      base_url = base_url.substring(0, base_url.length - 1);\n\n    if (pathname.startsWith(\"/\")) return base_url + pathname;\n    else {\n      return base_url + \"/\" + pathname;\n    }\n  },\n  get pathname() {\n    const res = location.pathname.substring(base.root.pathname.length);\n    if (!res.startsWith(\"/\")) return `/${res}`;\n    return res;\n  },\n  init() {\n    if (!base.root) {\n      let url = new URL(location.href);\n      if (w._prasi.basepath) {\n        url.pathname = w._prasi.basepath;\n      }\n\n      base.root = new URL(`${url.protocol}//${url.host}${url.pathname}`);\n\n      if (base.root.pathname.endsWith(\"/\")) {\n        base.root.pathname = base.root.pathname.substring(\n          0,\n          base.root.pathname.length - 1\n        );\n      }\n    }\n  },\n};\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { createId } from \"utils/script/create-id\";\n\nexport const useLocal = <T extends Record<string, any>>(\n  data: T,\n  effect?: () => Promise<void>,\n  deps?: any[]\n): {\n  [K in keyof T]: T[K];\n} & { render: () => void } => {\n  const [_, render] = useState(0);\n  const ref = useRef({\n    id: createId(),\n    render_count: 0,\n    rendering: true,\n    render_pending: false,\n    mounted: true,\n    data: {\n      ...data,\n      render() {\n        if (local.mounted) {\n          if (!local.rendering) {\n            if (local.render_count === Number.MAX_SAFE_INTEGER) {\n              local.render_count = 0;\n            }\n            local.render_count++;\n            render(local.render_count);\n          } else {\n            local.render_pending = true;\n          }\n        }\n      },\n    } as T & { render: () => void },\n  });\n  const local = ref.current;\n\n  local.mounted = true;\n  local.rendering = true;\n  useEffect(() => {\n    local.rendering = false;\n    local.mounted = true;\n    if (local.render_pending) {\n      local.render_pending = false;\n      local.data.render();\n    }\n  });\n\n  if (effect) {\n    useEffect(() => {\n      effect();\n    }, deps || []);\n  }\n  useEffect(() => {\n    return () => {\n      local.mounted = false;\n    };\n  }, []);\n\n  return local.data as any;\n};\n","import { FC, ReactElement, ReactNode, useEffect } from \"react\";\nimport { useLocal } from \"../react/use-local\";\n\nconst w = window as unknown as {\n  loadingIcon: string;\n  ContentLoading?: FC<{ alt?: any; note?: any }>;\n};\n\nexport interface ISVGProps extends React.SVGProps<SVGSVGElement> {\n  size?: number;\n  className?: string;\n}\n\nexport const LoadingSpinner = ({\n  size = 24,\n  className,\n  ...props\n}: ISVGProps) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={size}\n      height={size}\n      {...props}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className={cx(\"animate-spin\", className)}\n    >\n      <path d=\"M21 12a9 9 0 1 1-6.219-8.56\" />\n    </svg>\n  );\n};\n\nexport const Loading: FC<{\n  children?: ReactNode;\n  className?: string;\n  show?: boolean;\n  backdrop?: boolean;\n  note?: ReactNode;\n  alt?: ReactElement;\n  pointer?: boolean;\n}> = ({ children, className, show, backdrop, note, alt, pointer }) => {\n  const local = useLocal({\n    icon: <div className=\"px-4 py-1\">Loading...</div>,\n    value: 0.111,\n    ival: null as any,\n  });\n  useEffect(() => {\n    local.ival = setInterval(() => {\n      local.value += 0.1333;\n      if (local.value >= 1.3) {\n        local.value = 0;\n      }\n      local.render();\n    }, 200);\n    if (w.loadingIcon) {\n      local.icon = (\n        <img\n          alt=\"loading\"\n          src={w.loadingIcon}\n          className={css`\n            width: 42px;\n            height: 42px;\n          `}\n        />\n      );\n      local.render();\n    }\n    return () => {\n      clearInterval(local.ival);\n    };\n  }, []);\n\n  const CustomLoading = w.ContentLoading;\n\n  return (\n    <>\n      {backdrop !== false && (\n        <div\n          key={1}\n          className={cx(\n            \"flex items-center z-40 bg-white pointer-events-none\",\n            \"w-full h-full fixed transition-all duration-1000\",\n            typeof show !== \"undefined\"\n              ? show\n                ? \"opacity-50\"\n                : \"opacity-0\"\n              : \"opacity-50\"\n          )}\n          onContextMenuCapture={(e) => {\n            e.preventDefault();\n          }}\n        ></div>\n      )}\n      {children ? (\n        <div\n          key={2}\n          onContextMenuCapture={(e) => {\n            e.preventDefault();\n          }}\n          className={cx(\n            \"flex flex-1 items-center justify-center z-40 transition-all\",\n            className\n              ? className\n              : backdrop !== false\n                ? \"w-full h-full fixed\"\n                : \"\",\n            typeof show !== \"undefined\" ? (show ? \"\" : \"hidden\") : \"\"\n          )}\n        >\n          <div className=\"flex items-center justify-center flex-col space-y-3 bg-white p-4 rounded-lg select-none\">\n            <div className=\"text-sm\">{children}</div>\n          </div>\n        </div>\n      ) : (\n        <div\n          key={2}\n          className={cx(\n            \"flex flex-1 items-center justify-center z-40  transition-all\",\n            pointer !== true && \"pointer-events-none\",\n            className\n              ? className\n              : backdrop !== false\n                ? \"w-full h-full fixed\"\n                : \"\",\n            typeof show !== \"undefined\" ? (show ? \"\" : \"hidden\") : \"\"\n          )}\n        >\n          {CustomLoading ? (\n            <CustomLoading alt={alt} note={note} />\n          ) : (\n            <div\n              className={cx(\n                \"w-1/6 flex flex-col items-center justify-center\",\n                css`\n                  min-width: 30px;\n                  .pr-outer {\n                    background: rgba(0, 0, 0, 0.1) !important;\n                  }\n                `\n              )}\n            >\n              <div\n                key={1}\n                className=\"text-[10px] text-slate-400 whitespace-nowrap\"\n              >\n                {note}\n              </div>\n\n              <div\n                key={2}\n                className=\"pr-outer w-full h-[3px] flex items-stretch rounded-sm overflow-hidden\"\n              >\n                <div\n                  className={cx(\n                    \"bg-blue-800 transition-all duration-200 rounded-sm w-full\",\n                    css`\n                      transform: translate(${-100 + local.value * 200}%);\n                    `\n                  )}\n                ></div>\n              </div>\n              {alt}\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n","import type { PrismaClient } from \"prasi-db\";\nimport type { snapshot } from \"valtio\";\nexport type PageProps = {\n  pathname: string;\n  domain: string;\n  params: any;\n};\n\nexport type PrasiAPI = {\n  apiEntry: any;\n  prismaTypes?: {\n    \"prisma.d.ts\": string;\n    \"runtime/library.d.ts\": string;\n    \"runtime/index.d.ts\": string;\n  };\n  apiTypes?: string;\n};\n\ndeclare global {\n  const _db: PrismaClient;\n}\nexport {};\n\nexport const w = window as unknown as {\n  isEditor: boolean;\n  isMobile: boolean;\n  basehost?: string;\n  basepath: string;\n  navigateOverride: (s: string) => string;\n  isDesktop: boolean;\n  prasiApi: Record<string, PrasiAPI>;\n  prasiContext: {\n    render: () => void;\n    renderEditor?: () => void;\n    afterEditorRender?: () => void;\n  };\n  loadedFonts: string[];\n  prasiApiDbPull: boolean;\n  mobile?: any;\n  params: any;\n  editorGlbDefault: string;\n  ts: number;\n  serverurl: string;\n  apiurl: string;\n  _api: any;\n  _db: any;\n  offline: boolean;\n  sync_too_long: boolean;\n  editorRender?: () => void;\n  debug: {\n    on: any;\n    off: any;\n  };\n  pointer_active: boolean;\n};\n","import axios from \"axios\";\n\n(BigInt.prototype as any).toJSON = function (): string {\n  return `BigInt::` + this.toString();\n};\nlet w = (typeof window !== \"undefined\" ? window : null) as any;\nlet g = (typeof global !== \"undefined\" ? global : undefined) as any;\n\nexport const fetchViaProxy = async (\n  target_url: string,\n  data?: any,\n  _headers?: any,\n  parse_json?: boolean\n) => {\n  const headers = { ..._headers };\n\n  let body = null as any;\n  let isFile = false;\n  let isRaw = false;\n  let uploadProgress = null as any;\n\n  const files: File[] = [];\n  if (Array.isArray(data)) {\n    for (const item of data) {\n      if (item instanceof File) {\n        files.push(item);\n        isFile = true;\n      }\n      if (item instanceof Uint8Array) {\n        isRaw = true;\n        body = item;\n      }\n\n      if (typeof item === \"function\") {\n        uploadProgress = item;\n      }\n    }\n  } else if (data instanceof File) {\n    isFile = true;\n    files.push(data);\n  }\n\n  if (!isRaw) {\n    if (!isFile) {\n      body = JSON.stringify(data);\n      headers[\"content-type\"] = \"application/json\";\n    } else {\n      const fd = new FormData();\n      for (const file of files) {\n        fd.append(file.name, file);\n      }\n      body = fd;\n      delete headers[\"content-type\"];\n      headers[\"enctype\"] = `multipart/form-data;`;\n    }\n  }\n\n  const to_url = new URL(target_url);\n\n  if (w !== null) {\n    const cur_url = new URL(location.href);\n    let final_url = \"\";\n\n    if (\n      // to_url.hostname === 'localhost' ||\n      to_url.host === cur_url.host ||\n      (!!g && typeof g.server_hook === \"function\")\n    ) {\n      final_url = to_url.toString();\n    } else {\n      final_url = `${cur_url.protocol}//${\n        cur_url.host\n      }/_proxy/${encodeURIComponent(to_url.toString())}`;\n    }\n\n    if (final_url) {\n      if (uploadProgress) {\n        const res = await axios({\n          method: data ? \"post\" : undefined,\n          url: final_url,\n          data: body,\n          onUploadProgress: uploadProgress,\n        });\n\n        return res.data;\n      } else {\n        const res = await fetch(\n          final_url,\n          data\n            ? {\n                method: \"POST\",\n                body,\n                headers,\n              }\n            : undefined\n        );\n        const raw = await res.text();\n        if (parse_json === false) return raw;\n\n        try {\n          return JSON.parse(raw, replacer);\n        } catch (e) {\n          return raw;\n        }\n      }\n    }\n  }\n\n  const res = await fetch(\n    to_url,\n    data\n      ? {\n          method: \"POST\",\n          body,\n          headers,\n        }\n      : undefined\n  );\n  const raw = await res.text();\n  try {\n    return JSON.parse(raw, replacer);\n  } catch (e) {\n    return raw;\n  }\n};\n\nconst replacer = (key: string, value: string) => {\n  if (typeof value === \"string\" && value.startsWith(\"BigInt::\")) {\n    return BigInt(value.substring(8));\n  }\n  return value;\n};\n\nexport const getProxyUrl = (target_url: string) => {\n  const to_url = new URL(target_url);\n\n  if (w !== null) {\n    const cur_url = new URL(location.href);\n    let final_url = \"\";\n\n    if (\n      // to_url.hostname === 'localhost' ||\n      to_url.host === cur_url.host ||\n      (!!g && typeof g.server_hook === \"function\")\n    ) {\n      final_url = to_url.toString();\n    } else {\n      final_url = `${cur_url.protocol}//${\n        cur_url.host\n      }/_proxy/${encodeURIComponent(to_url.toString())}`;\n    }\n    return final_url;\n  }\n  return to_url;\n};\n","import trim from \"lodash.trim\";\n\nexport const loadApiProxyDef = async (_url: string, with_types: boolean) => {\n  const url = trim(_url, \"/\");\n\n  await new Promise<void>((done) => {\n    const d = document;\n    const script = d.createElement(\"script\");\n    script.onload = async () => {\n      done();\n    };\n\n    if (!localStorage.getItem(\"api-ts-\" + url)) {\n      localStorage.setItem(\"api-ts-\" + url, Date.now().toString());\n    }\n\n    const url_target = new URL(url);\n    const url_cur = new URL(location.href);\n\n    url_cur.search = \"\";\n    url_cur.hash = \"\";\n    url_target.hash = \"\";\n    let is_remote = \"\";\n    if (url_target.host !== url_cur.host) {\n      is_remote = \"&remote=1\";\n    }\n\n    url_cur.pathname = \"\";\n    let cur_url = trim(url_cur.toString(), \"/\");\n    if (with_types) {\n      script.src = `${cur_url}/_prasi/load.js?url=${url}&v3&dev=1${is_remote}`;\n    } else {\n      script.src = `${cur_url}/_prasi/load.js?url=${url}&v3${is_remote}`;\n    }\n    script.onerror = () => {\n      done();\n    };\n\n    if (!document.querySelector(`script[src=\"${script.src}\"]`)) {\n      d.body.appendChild(script);\n    } else {\n      done();\n    }\n  });\n};\n\nconst baseUrl = (url: string) => {\n  const base = new URL(url);\n\n  return `${base.protocol}//${base.host}`;\n};\n\nconst urlPath = (url: string, pathname: string) => {\n  const base = new URL(url);\n  base.pathname = pathname;\n  return base.toString();\n};\n\nconst loadText = async (url: string, v2?: boolean) => {\n  const res = await fetch(url);\n  return await res.text();\n};\n","import { gzipSync } from \"fflate\";\nimport { w } from \"../../../utils/types/general\";\nimport { fetchViaProxy } from \"../proxy\";\nimport { loadApiProxyDef } from \"./api-proxy-def\";\nimport { encode } from \"msgpackr\";\n\nexport type ApiProxy<T extends Record<string, any> = {}> = any;\n\nconst apiProxyLoaded: Record<string, Promise<void>> = {};\n\nexport const apiProxy = (api_url: string) => {\n  if (!w.prasiApi) {\n    w.prasiApi = {};\n  }\n\n  try {\n    const base = new URL(api_url);\n    let base_url = `${base.protocol}//${base.host}`;\n    if (!w.prasiApi[base_url]) {\n      if (!apiProxyLoaded[base_url]) {\n        apiProxyLoaded[base_url] = loadApiProxyDef(\n          base_url,\n          location.hostname.includes(\"prasi\")\n        );\n      }\n    }\n\n    return new Proxy(\n      {},\n      {\n        get: (_, actionName: string) => {\n          if (actionName === \"_compressed\") {\n            return new Proxy(\n              {},\n              {\n                get(target, p, receiver) {\n                  return async (...rest: any) => {\n                    const url = `${base_url}/${p as string}`;\n                    return await fetchSendApi(url, [\n                      gzipSync(new Uint8Array(encode(rest[0]))),\n                    ]);\n                  };\n                },\n              }\n            );\n          }\n          if (actionName === \"_url\") {\n            return (pathname: string, proxy?: boolean) => {\n              const to_url = new URL(base_url);\n              to_url.pathname = pathname\n                .split(\"/\")\n                .filter((e) => e)\n                .join(\"/\");\n\n              const cur_url = new URL(location.href);\n              let final_url = \"\";\n\n              if (to_url.host === cur_url.host || proxy === false) {\n                final_url = to_url.toString();\n              } else {\n                final_url = `${cur_url.protocol}//${\n                  cur_url.host\n                }/_proxy/${encodeURIComponent(to_url.toString())}`;\n              }\n              return final_url;\n            };\n          }\n\n          const createFn = (actionName: string) => {\n            return function (\n              this: { api_url: string } | undefined,\n              ...rest: any\n            ) {\n              return new Promise<any>(async (resolve, reject) => {\n                try {\n                  let api_ref = w.prasiApi[base_url];\n\n                  if (\n                    !api_ref &&\n                    apiProxyLoaded &&\n                    typeof apiProxyLoaded[base_url] === \"object\"\n                  ) {\n                    await apiProxyLoaded[base_url];\n                    api_ref = w.prasiApi[base_url];\n                  }\n\n                  if (api_ref) {\n                    if (Object.keys(api_ref).length === 0) {\n                      const url = `${base_url}/${actionName}`;\n\n                      const result = await fetchSendApi(url, rest);\n                      resolve(result);\n                      return;\n                    }\n\n                    if (actionName === \"_raw\") {\n                      const pathname = rest[0];\n                      const url = `${base_url}${pathname}`;\n\n                      const result = await fetchSendApi(url, rest.slice(1));\n                      resolve(result);\n                      return;\n                    }\n\n                    if (!api_ref.apiEntry) api_ref.apiEntry = {};\n                    if (api_ref.apiEntry && !api_ref.apiEntry[actionName]) {\n                      reject(\n                        `API ${actionName.toString()} not found, existing API: \\n   - ${Object.keys(\n                          api_ref.apiEntry || {}\n                        ).join(\"\\n   - \")}`\n                      );\n                      return;\n                    }\n\n                    let actionUrl = api_ref.apiEntry[actionName].url;\n                    const actionParams = api_ref.apiEntry[actionName].args;\n                    if (actionUrl && actionParams) {\n                      if (rest.length > 0 && actionParams.length > 0) {\n                        for (const [idx, p] of Object.entries(rest)) {\n                          const paramName = actionParams[parseInt(idx)];\n                          if (\n                            actionParams &&\n                            actionParams.includes(paramName)\n                          ) {\n                            if (\n                              !!p &&\n                              typeof p !== \"string\" &&\n                              typeof p !== \"number\"\n                            ) {\n                              continue;\n                            }\n                          }\n                          actionUrl = actionUrl.replace(\n                            `:${paramName}?`,\n                            p + \"\"\n                          );\n                          actionUrl = actionUrl.replace(\n                            `:${paramName}`,\n                            p + \"\"\n                          );\n                        }\n                      }\n\n                      const url = `${base_url}${actionUrl}`;\n\n                      const result = await fetchSendApi(url, rest);\n                      resolve(result);\n                    } else {\n                      console.error(`API Not Found: ${actionName.toString()}`);\n                    }\n                  } else {\n                    reject(\"Failed to load API [Proxy]: \" + base_url);\n                  }\n                } catch (e) {\n                  reject(e);\n                }\n              });\n            };\n          };\n          if (actionName === \"then\") {\n            return new Proxy(\n              {},\n              {\n                get: (_, actionName: string) => {\n                  return createFn(actionName);\n                },\n              }\n            );\n          }\n\n          return createFn(actionName);\n        },\n      }\n    );\n  } catch (e) {\n    return null;\n  }\n};\n\nconst fetchSendApi = async (url: string, params: any) => {\n  return await fetchViaProxy(url, params, {\n    \"content-type\": \"application/json\",\n  });\n};\n","import hash_sum from \"hash-sum\";\nimport { get, set } from \"idb-keyval\";\nimport { pack } from \"msgpackr\";\nimport { fetchViaProxy, getProxyUrl } from \"../proxy\";\nimport { gzipSync } from \"fflate\";\nimport { waitUntil } from \"prasi-utils\";\n\nconst schema_promise = {\n  tables: {} as Record<string, any>,\n  columns: {} as Record<string, any>,\n  rels: {} as Record<string, any>,\n};\n\nconst db_mode = {} as Record<string, \"checking\" | \"msgpack\" | \"json\">;\nconst encode = new TextEncoder().encode;\nexport const dbProxy = (dburl: string) => {\n  const name = \"\";\n\n  let is_url_valid = false;\n  try {\n    new URL(dburl);\n    is_url_valid = true;\n  } catch (e) {}\n\n  if (is_url_valid && dburl && !db_mode[dburl]) {\n    db_mode[dburl] = \"checking\";\n    fetchSendDb(\n      {\n        table: \"check\",\n        action: \"check\",\n      },\n      dburl\n    ).then((res) => {\n      if (res && res.mode === \"encrypted\") {\n        db_mode[dburl] = \"msgpack\";\n      } else {\n        db_mode[dburl] = \"json\";\n      }\n    });\n  }\n\n  return new Proxy(\n    {},\n    {\n      get(_, table: string) {\n        if (!is_url_valid) return null;\n        if (table === \"_batch\") {\n          return {\n            update: async (batch: any) => {\n              return fetchSendDb(\n                {\n                  name,\n                  action: \"batch_update\",\n                  table: \"\",\n                  params: { batch },\n                },\n                dburl\n              );\n            },\n            upsert: async (arg: any) => {\n              return fetchSendDb(\n                {\n                  name,\n                  action: \"batch_upsert\",\n                  table: \"\",\n                  params: { arg },\n                },\n                dburl\n              );\n            },\n          };\n        }\n        if (table === \"_schema\") {\n          return {\n            tables: async () => {\n              if (!schema_promise.tables[dburl]) {\n                schema_promise.tables[dburl] = fetchSendDb(\n                  {\n                    name,\n                    action: \"schema_tables\",\n                    table: \"\",\n                    params: [],\n                  },\n                  dburl\n                );\n              }\n\n              return await schema_promise.tables[dburl];\n            },\n            columns: async (table: string) => {\n              if (!schema_promise.columns[dburl + \"_\" + table]) {\n                schema_promise.columns[dburl + \"_\" + table] = fetchSendDb(\n                  {\n                    name,\n                    action: \"schema_columns\",\n                    table,\n                    params: [],\n                  },\n                  dburl\n                );\n              }\n\n              return await schema_promise.columns[dburl + \"_\" + table];\n            },\n            rels: async (table: string) => {\n              if (!schema_promise.rels[dburl + \"_\" + table]) {\n                schema_promise.rels[dburl + \"_\" + table] = fetchSendDb(\n                  {\n                    name,\n                    action: \"schema_rels\",\n                    table,\n                    params: [],\n                  },\n                  dburl\n                );\n              }\n\n              return await schema_promise.rels[dburl + \"_\" + table];\n            },\n          };\n        }\n\n        if (table.startsWith(\"$\")) {\n          return (...params: any[]) => {\n            const bytes = gzipSync(encode(JSON.stringify(params)));\n\n            return fetchSendDb(\n              {\n                name,\n                action: \"query\",\n                table,\n                params: btoa(\n                  bytes.reduce(\n                    (acc, current) => acc + String.fromCharCode(current),\n                    \"\"\n                  )\n                ),\n              },\n              dburl\n            );\n          };\n        }\n\n        return new Proxy(\n          {},\n          {\n            get(_, action: string) {\n              return async (...params: any[]) => {\n                if (table === \"query\") {\n                  table = action;\n                  action = \"query\";\n                }\n                return await fetchSendDb(\n                  {\n                    name,\n                    action,\n                    table,\n                    params,\n                  },\n                  dburl\n                );\n              };\n            },\n          }\n        );\n      },\n    }\n  );\n};\n\nconst editorQueryLoaded: Record<string, true> = {};\n\nexport const fetchSendDb = async (\n  _params: Record<string, any>,\n  dburl: string\n) => {\n  const base = new URL(dburl);\n  base.pathname = `/_dbs`;\n  const params = _params || {};\n\n  if (params.table) {\n    base.pathname += `/${params.table}`;\n  }\n  const url = base.toString();\n\n  if (typeof localStorage !== \"undefined\" && localStorage.mlsid) {\n    params.mlsid = localStorage.mlsid;\n  }\n\n  const hsum = hash_sum({ ...params, dburl });\n\n  let isEditor = false;\n  if (\n    typeof location !== \"undefined\" &&\n    base.hostname !== location.hostname &&\n    (window as any).isEditor &&\n    [\"prasi.avolut.com\", \"localhost:4550\", \"127.0.0.1:4550\"].includes(\n      location.host\n    )\n  )\n    isEditor = true;\n\n  const load = async () => {\n    let body: any = params;\n    let result = null;\n    if (params.action === \"check\") {\n      result = await fetchViaProxy(\n        url,\n        body,\n        {\n          \"content-type\": \"application/json\",\n        },\n        false\n      );\n\n      try {\n        if (typeof result === \"string\") return JSON.parse(result);\n      } catch (e) {}\n      return result;\n    }\n    if (!db_mode[dburl] || db_mode[dburl] === \"checking\") {\n      await waitUntil(\n        () => !(!db_mode[dburl] || db_mode[dburl] === \"checking\")\n      );\n    }\n\n    if (db_mode[dburl] === \"msgpack\") {\n      body = gzipSync(new Uint8Array(pack(params)), {});\n      const res = await fetch(getProxyUrl(url), { method: \"POST\", body });\n      result = await res.json();\n    } else {\n      result = await fetchViaProxy(\n        url,\n        body,\n        {\n          \"content-type\": \"application/json\",\n        },\n        false\n      );\n    }\n\n    try {\n      if (typeof result === \"string\") return JSON.parse(result);\n    } catch (e) {}\n    return result;\n  };\n\n  if (isEditor) {\n    let result = await get(`editor-db-cache-${hsum}`);\n    if (!result) {\n      result = await load();\n      editorQueryLoaded[hsum] = true;\n      set(`editor-db-cache-${hsum}`, result);\n    } else {\n      if (!editorQueryLoaded[hsum]) {\n        load().then((result) => {\n          set(`editor-db-cache-${hsum}`, result);\n        });\n        editorQueryLoaded[hsum] = true;\n      }\n    }\n\n    return result;\n  }\n\n  return await load();\n};\n","import { addRoute, createRouter } from \"rou3\";\nimport { EPageContentTree } from \"../../ed/logic/types\";\nimport { base } from \"./base\";\n\nconst cached = { route: null as any, promise: null as any };\n\nconst loadCachedRoute = () => {\n  if (cached.promise) return cached.promise;\n  cached.promise = new Promise<{\n    site: any;\n    urls: {\n      id: string;\n      url: string;\n    }[];\n    layout: any;\n  }>(async (done) => {\n    if (cached.route) done(cached.route);\n\n    const res = await fetch(base.url`_prasi/route`);\n    if (!res.headers.get(\"content-encoding\")) {\n      fetch(base.url`_prasi/compress/only-gz`);\n    }\n\n    cached.route = await res.json();\n    done(cached.route);\n  });\n  return cached.promise;\n};\n\nexport type PageRoute = {\n  id: string;\n  url: string;\n  root: EPageContentTree;\n  loading?: true;\n};\n\nexport const loadRouter = async () => {\n  const router = createRouter<{\n    id: string;\n    url: string;\n    root?: EPageContentTree;\n  }>();\n  const pages = [] as PageRoute[];\n  let site = {\n    id: \"\",\n    name: \"\",\n    domain: \"\",\n    responsive: \"all\",\n    api_url: \"\",\n  };\n  let layout = { id: \"\", root: null as null | EPageContentTree };\n  try {\n    const res = await loadCachedRoute();\n\n    if (res && res.site && res.urls) {\n      site = res.site;\n      layout = res.layout;\n\n      for (const item of res.urls) {\n        addRoute(router, undefined, item.url, item);\n        pages.push(item);\n      }\n    }\n  } catch (e) {}\n\n  return { router, pages, site, layout };\n};\n\nexport type ProdRouter = Awaited<ReturnType<typeof loadRouter>>;\n","import { EPage } from \"../../ed/logic/types\";\nimport { base } from \"./base\";\n\nexport const loadPages = async (ids: string[]) => {\n  const result = {} as Record<string, EPage[\"content_tree\"]>;\n\n  const res = (await (\n    await fetch(base.url`_prasi/pages`, {\n      method: \"POST\",\n      body: JSON.stringify({ ids }),\n    })\n  ).json()) as {\n    id: string;\n    url: string;\n    root: EPage[\"content_tree\"];\n  }[];\n\n  for (const page of res) {\n    result[page.id] = page.root;\n  }\n\n  return result;\n};\n","import { apiProxy } from \"base/load/api/api-proxy\";\nimport { dbProxy } from \"base/load/db/db-proxy\";\nimport { loadRouter, PageRoute, ProdRouter } from \"prod/loader/route\";\nimport { defineStore, rawStore } from \"utils/react/define-store\";\nimport { snapshot } from \"valtio\";\nimport { IItem } from \"../../../utils/types/item\";\nimport { EBaseComp, EPage } from \"../../ed/logic/types\";\nimport { base } from \"../loader/base\";\nimport { loadPages } from \"../loader/page\";\n\nexport const useProdState = defineStore({\n  name: \"prod-store\",\n  ref: {\n    router: null as null | ProdRouter[\"router\"],\n    api: null as null | ReturnType<typeof apiProxy>,\n    db: null as null | ReturnType<typeof dbProxy>,\n    pages: [] as PageRoute[],\n    timeout: {\n      comps: null as any,\n    },\n    promise: {\n      comps: {} as Record<\n        string,\n        { promise: Promise<IItem>; resolve: (item: IItem) => void }\n      >,\n    },\n    comps: {} as Record<string, EBaseComp>,\n    page: null as null | PageRoute,\n    layout: { id: \"\", root: null as null | EPage[\"content_tree\"] },\n    vscode_exports: {} as any,\n  },\n  state: {\n    ts: Date.now(),\n    pathname: location.pathname,\n    mode: \"desktop\" as \"mobile\" | \"desktop\",\n    site: {\n      id: \"\",\n      name: \"\",\n      domain: \"\",\n      responsive: \"all\",\n      api_url: \"\",\n    },\n    status: {\n      router: \"init\" as \"init\" | \"loading\" | \"ready\",\n      comps: {} as Record<string, \"init\" | \"loading\">,\n    },\n  },\n  action: ({ state: s, update, ref: r }) => ({\n    initRouter() {\n      if (s.status.router === \"init\") {\n        s.status.router = \"loading\";\n\n        const site_id = (window as any)?._prasi?.site_id;\n        const fn = new Function(\n          location.hostname === \"prasi.avolut.com\" ||\n          location.pathname.startsWith(`/prod/${site_id}`)\n            ? `return import('/prod/${site_id}/index.js');`\n            : `return import('/index.js');`\n        );\n\n        loadRouter().then(({ router, pages, site, layout }) => {\n          update(async (s) => {\n            s.site = site;\n            r.layout = layout;\n            r.router = router;\n            r.pages = pages;\n\n            r.vscode_exports = { ...(await fn()) };\n            delete r.vscode_exports.default;\n            for (const [k, v] of Object.entries(r.vscode_exports)) {\n              (window as any)[k] = v;\n            }\n            \n            if (site.api_url) {\n              r.api = apiProxy(site.api_url);\n              r.db = dbProxy(site.api_url);\n            }\n            s.status.router = \"ready\";\n          });\n        });\n      }\n    },\n    loadComp(ids: string[]) {\n      for (const id of ids) {\n        if (!r.comps[id]) {\n          if (!s.status.comps[id]) {\n            s.status.comps[id] = \"init\";\n\n            if (!r.promise.comps[id]) {\n              const pending = { resolve: null as any };\n              const promise = new Promise<IItem>((resolve) => {\n                pending.resolve = resolve;\n              });\n              r.promise.comps[id] = { promise, resolve: pending.resolve };\n            }\n          }\n        }\n      }\n\n      clearTimeout(r.timeout.comps);\n      r.timeout.comps = setTimeout(async () => {\n        const ids = Object.entries(s.status.comps)\n          .filter(([_, status]) => {\n            if (status === \"init\") return true;\n          })\n          .map(([id]) => id);\n\n        update((s) => {\n          for (const id of ids) {\n            s.status.comps[id] = \"loading\";\n          }\n        });\n\n        if (ids.length > 0) {\n          const res = await fetch(base.url`_prasi/comps`, {\n            method: \"POST\",\n            body: JSON.stringify({ ids }),\n          });\n\n          const json = await res.json();\n\n          if (typeof json === \"object\" && json) {\n            update((s) => {\n              for (const id of ids) {\n                if (json[id]) {\n                  r.comps[id] = structuredClone(json[id]);\n                  if (r.promise.comps[id]) {\n                    r.promise.comps[id].resolve(json[id]);\n                  }\n                }\n\n                delete r.promise.comps[id];\n                delete s.status.comps[id];\n              }\n            });\n          }\n        }\n      }, 50);\n    },\n    loadPage(page: PageRoute) {\n      if (r.page?.id !== page.id) {\n        r.page = page;\n      }\n\n      if (!page.root && !page.loading) {\n        page.loading = true;\n\n        loadPages([page.id]).then((result) => {\n          update((s) => {\n            const tree = result[page.id];\n            if (tree && r.page) {\n              r.page.root = tree;\n\n              let mode = (\n                s.site.responsive !== \"all\" ? s.site.responsive : \"desktop\"\n              ) as \"mobile\" | \"desktop\";\n              s.mode = tree.responsive ? tree.responsive : mode;\n\n              delete r.page.loading;\n\n              if (tree.component_ids) {\n                const ids = tree.component_ids;\n                if (Array.isArray(ids)) {\n                  this.loadComp(ids);\n                }\n              }\n            }\n          });\n        });\n      }\n    },\n  }),\n});\n\nexport const rawProd = rawStore<typeof useProdState>(\"prod-store\");\n","import { PNode } from \"logic/types\";\nimport { useErrorBoundary, withErrorBoundary } from \"react-use-error-boundary\";\nimport { useLocal } from \"../../../utils/react/use-local\";\nimport { ReactNode } from \"react\";\n\nexport const ErrorBox = withErrorBoundary(\n  ({\n    children,\n    error_jsx,\n    node,\n    id,\n    silent = true,\n    onError,\n  }: {\n    children: any;\n    error_jsx?: ReactNode;\n    node?: PNode;\n    id?: string;\n    silent?: boolean;\n    onError?: (error: any) => void;\n  }) => {\n    const local = useLocal({ retrying: false, node });\n    const [error, resetError] = useErrorBoundary((error, errorInfo) => {\n      if (silent !== true) console.error(error);\n      if (onError) onError(error);\n    });\n\n    if (error) {\n      if (typeof error_jsx !== \"undefined\") return error_jsx;\n      return (\n        <div className=\"bg-red-100 border border-red-300 rounded-sm text-xs flex flex-col items-center\">\n          <div className=\"text-[10px] font-bold text-red-900 self-stretch px-1\">\n            ERROR {node?.item.name ? \"[\" + node.item.name + \"]:\" : \"\"}\n          </div>\n          <p className=\"border-b border-red-300 text-black px-1 pb-1 min-w-[100px]\">\n            {!local.retrying ? <>{(error as any).message}</> : <>Retrying...</>}\n          </p>\n          <div className=\"p-1\">\n            <button\n              onClick={() => {\n                local.retrying = true;\n                local.render();\n\n                setTimeout(() => {\n                  local.retrying = false;\n                  local.render();\n                  resetError();\n                }, 100);\n              }}\n              className=\"bg-white border text-black border-white hover:border-red-400 hover:bg-red-50 rounded px-2\"\n            >\n              Try again\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return children;\n  }\n);\n","import { w } from \"../../prod/root/window\";\nimport { ViProp } from \"./types\";\n\nexport const viInit = ({\n  loader,\n  enablePreload,\n}: {\n  loader: ViProp[\"loader\"];\n  enablePreload: boolean;\n}) => {\n  w.preloaded = (url: string) => {\n    if (!enablePreload) return false;\n    return false;\n  };\n  w.preload = (urls, opt) => {\n    return new Promise<void>((done) => {\n      if (!enablePreload) {\n        done();\n      }\n    });\n  };\n\n  if (!w.serverurl) {\n    const cur = new URL(location.href);\n    w.serverurl = `${cur.protocol}//${cur.host}`;\n  }\n\n  w.siteurl = (pathname: string, forceOriginal?: boolean) => {\n    if (pathname.startsWith(\"http://\") || pathname.startsWith(\"https://\"))\n      return pathname;\n\n    return pathname;\n  };\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { IItem, IVar } from \"utils/types/item\";\nimport { defineStore } from \"../../../utils/react/define-store\";\nimport { ViComps, ViPageRoot, ViWrapperType } from \"./types\";\n\ntype ITEM_ID = string;\ntype VAR_NAME = string;\ntype VAR_ID = string;\n\nconst viRef = {\n  init: false,\n  mode: \"desktop\" as \"mobile\" | \"desktop\",\n\n  loader: {\n    comps: (ids: string[]) => Promise<void>,\n  },\n  comps: {} as ViComps,\n  db: null as any,\n  api: null as any,\n  item_parents: {} as Record<ITEM_ID, ITEM_ID>,\n  comp_props: {} as Record<ITEM_ID, Record<VAR_NAME, any>>,\n  var_items: {} as Record<VAR_ID, { var: IVar<any>; item: IItem }>,\n\n  wrapper: null as null | ViWrapperType,\n  instanced: {} as Record<ITEM_ID, any>,\n\n  page: null as null | ViPageRoot,\n  layout: null as null | ViPageRoot,\n  comp: { instances: {} as Record<string, IItem>, loaded: new Set<string>() },\n\n  edit_comp_id: \"\",\n  local_render: {} as Record<string, () => void>,\n\n  dev_item_error: {} as Record<string, any>,\n  dev_tree_render: {} as Record<string, () => void>,\n\n  resetCompInstance: (comp_id: string) => {},\n  resetLocal: () => {},\n\n  vscode_exports: {} as Record<string, any>,\n\n  jsx_pass: {} as Record<string, Record<string, string>>,\n};\nexport type ViRef = typeof viRef;\n\nexport const useVi = defineStore({\n  name: \"vi-store\",\n  ref: viRef,\n  state: {},\n  action: ({ state, ref, update }) => ({\n    instantiateComp: (item: DeepReadonly<IItem>) => {\n      const comp_id = item.component!.id;\n      if (!ref.comp.instances[item.id] && comp_id && ref.comps[comp_id]) {\n        ref.comp.instances[item.id] = structuredClone(ref.comps[comp_id]);\n        ref.comp.instances[item.id].id = item.id;\n      }\n    },\n    resetCompInstance: (comp_id: string) => {\n      for (const [k, v] of Object.entries(ref.comp.instances)) {\n        if (v.component?.id === comp_id) {\n          delete ref.comp.instances[k];\n        }\n      }\n    },\n    syncProp: ({\n      page,\n      comps,\n      layout,\n      db,\n      api,\n      mode,\n      edit_comp_id,\n    }: {\n      page: ViPageRoot;\n      layout?: ViPageRoot;\n      comps: ViComps;\n      db: any;\n      api: any;\n      mode: \"desktop\" | \"mobile\";\n      edit_comp_id?: string;\n    }) => {\n      ref.page = page;\n      ref.layout = layout || null;\n      ref.comps = comps;\n      ref.db = db;\n      ref.api = api;\n      ref.mode = mode;\n      ref.edit_comp_id = edit_comp_id || \"\";\n      ref.resetLocal = () => {\n        ref.dev_tree_render = {};\n        ref.dev_item_error = {};\n      };\n      for (const id of Object.keys(comps)) {\n        if (!(ref.comp.loaded instanceof Set)) {\n          ref.comp.loaded = new Set();\n        }\n        ref.comp.loaded.add(id);\n      }\n    },\n  }),\n});\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { IItem } from \"utils/types/item\";\nimport { ViRender } from \"vi/vi-render\";\nimport { ViComps } from \"./types\";\nimport React from \"react\";\n\nexport const compArgs = (\n  item: DeepReadonly<IItem>,\n  comps: ViComps,\n  existing: any,\n  db: any,\n  api: any,\n  vscode_exports: any,\n  standalone?: string\n) => {\n  const inject = {} as any;\n  const args: Record<string, any> = { ...existing };\n  if (item.component?.props) {\n    const comp_id = item.component.id;\n    const comp = comps[comp_id];\n\n    for (const [k, master_prop] of Object.entries(\n      comp.component?.props || {}\n    )) {\n      const prop = item.component.props[k];\n      if (!prop) continue;\n      let js = prop.valueBuilt || \"\";\n\n      if (master_prop.meta?.type === \"content-element\") {\n        const content = prop.content;\n        if (content) {\n          args[k] = {\n            __jsx: true,\n            __Component: ({\n              parents,\n              parent,\n              merged,\n              is_layout,\n            }: {\n              parents: any;\n              parent: any;\n              merged: any;\n              is_layout: boolean;\n            }) => {\n              parents[content.id] = parent.id;\n              return (\n                <ViRender\n                  is_layout={is_layout}\n                  instance_id={item.id}\n                  item={content}\n                  standalone={standalone}\n                  merged={merged}\n                />\n              );\n            },\n            __render(\n              parent: IItem,\n              parents: Record<string, string>,\n              merged: any,\n              is_layout: boolean\n            ) {\n              return (\n                <this.__Component\n                  parent={parent}\n                  parents={parents}\n                  merged={merged}\n                  is_layout={is_layout}\n                />\n              );\n            },\n          };\n        } else {\n          args[k] = null;\n        }\n        continue;\n      } else {\n        if (js.startsWith(`const _jsxFileName = \"\";`)) {\n          js = `(() => { ${js.replace(\n            `const _jsxFileName = \"\";`,\n            `const _jsxFileName = \"\"; return `\n          )} })()`;\n        }\n\n        const src = replaceWithObject(js, replacement) || \"\";\n\n        const arg = {\n          ...vscode_exports,\n          db,\n          api,\n          ...existing,\n          ...inject,\n        };\n\n        let fn_src = `// [${item.name}] ${k}: ${item.id}\nreturn ${src}\n`;\n        if (src.startsWith(`//prasi-prop`)) {\n          fn_src = `// [${item.name}] ${k}: ${item.id}\n${src.substring(`//prasi-prop`.length + 1)}`;\n        }\n        try {\n          const fn = new Function(\n            ...Object.keys(arg),\n            `\\\n  try { \n    ${fn_src.split(\"\\n\").join(`\\n    `)}\n  } catch(e) {\n    console.error(e);\n  }`\n          );\n\n          args[k] = fn(...Object.values(arg));\n        } catch (e) {\n          console.error(e);\n          arg[k] = null;\n        }\n      }\n    }\n  }\n\n  return { ...inject, ...args };\n};\n\nexport const replacement = {\n  \"stroke-width\": \"strokeWidth\",\n  \"fill-rule\": \"fillRule\",\n  \"clip-rule\": \"clipRule\",\n  \"stroke-linejoin\": \"strokeLinejoin\",\n  \"stroke-linecap\": \"strokeLinecap\",\n  \"clip-path\": \"clipPath\",\n  \"stroke-miterlimit\": \"strokeMiterlimit\",\n};\n\nexport const replaceWithObject = (tpl: string, data: any) => {\n  let res = tpl;\n  for (const [k, v] of Object.entries(data)) {\n    res = res.replaceAll(k, v as string);\n  }\n  return res;\n};\n","export const responsiveVal = <T>(\n  item: any,\n  key: string,\n  mode: \"desktop\" | \"mobile\" | undefined,\n  defaultVal: T\n): T => {\n  let value = item[key];\n\n  if (mode === \"desktop\" || !mode) {\n    if (!value && item.mobile && item.mobile[key]) {\n      value = item.mobile[key];\n    }\n  } else {\n    if (item.mobile && item.mobile[key]) {\n      value = item.mobile[key];\n    }\n  }\n\n  if (!value) {\n    value = defaultVal;\n  }\n  return value as T;\n};\n","import { responsiveVal } from \"vi/lib/responsive-val\";\nimport { MetaItem } from \"../types/meta\";\nimport { FNAdv } from \"../types/meta-fn\";\n\nexport const cssAdv = (\n  cur: { adv?: FNAdv; type: MetaItem[\"type\"] },\n  mode: \"mobile\" | \"desktop\"\n) => {\n  const adv = responsiveVal<FNAdv>(cur, \"adv\", mode, {});\n\n  if (typeof adv.css === \"string\") {\n    const hasCSS = adv.css.trim();\n    if (hasCSS) {\n      return cx(\n        css`\n          ${adv.css}\n        `,\n        mode\n      );\n    }\n  }\n  return \"\";\n};\n","import { responsiveVal } from \"vi/lib/responsive-val\";\nimport { MetaItem } from \"../types/meta\";\nimport { FNBackground } from \"../types/meta-fn\";\n\nexport const cssBackground = (\n  cur: { bg?: FNBackground; type: MetaItem[\"type\"] },\n  mode?: \"mobile\" | \"desktop\"\n) => {\n  const bg = responsiveVal<FNBackground>(cur, \"bg\", mode, {\n    size: \"contain\",\n    pos: \"center\",\n  });\n\n  let bgurl = `${serverurl}${bg.url}`;\n  if (bg && bg.url && bg.url.startsWith(\"http\")) {\n    bgurl = bg.url;\n  }\n\n  return cx(\n    `\n      background-repeat: no-repeat;\n    `,\n    bg.color &&\n      `\n        background-color: ${bg.color};\n      `,\n    bg.size &&\n      `\n        background-size: ${bg.size};\n      `,\n    bg.pos &&\n      `\n        background-position: ${bg.pos};\n      `\n  );\n};\n","import get from \"lodash.get\";\nimport { FNBorder } from \"../types/meta-fn\";\nimport { responsiveVal } from \"vi/lib/responsive-val\";\n\nexport const cssBorder = (\n  cur: { border?: FNBorder },\n  mode?: \"mobile\" | \"desktop\"\n) => {\n  const border = responsiveVal<FNBorder>(cur, \"border\", mode, {\n    style: \"solid\",\n    stroke: {},\n    rounded: {\n      tr: 0,\n      tl: 0,\n      bl: 0,\n      br: 0,\n    },\n    color: \"transparent\",\n  });\n  return cx(\n    pick(border, \"stroke.l\", \"border-left-width\"),\n    pick(border, \"stroke.r\", \"border-right-width\"),\n    pick(border, \"stroke.b\", \"border-bottom-width\"),\n    pick(border, \"stroke.t\", \"border-top-width\"),\n    pick(border, \"color\", \"border-color\", \"transparent\"),\n    pick(border, \"style\", \"border-style\", \"dashed\"),\n    pick(border, \"rounded.tl\", \"border-top-left-radius\"),\n    pick(border, \"rounded.tr\", \"border-top-right-radius\"),\n    pick(border, \"rounded.bl\", \"border-bottom-left-radius\"),\n    pick(border, \"rounded.br\", \"border-bottom-right-radius\")\n  );\n};\n\nconst pick = (obj: any, key: string, attr: string, notpx?: string) => {\n  const val = get(obj, key);\n  if (notpx) {\n    if (val) return `${attr}: ${val};`;\n    else return `${attr}: ${notpx};`;\n  } else if (val) return `${attr}: ${val}px;`;\n};\n","import { responsiveVal } from \"vi/lib/responsive-val\";\nimport { MetaItem } from \"../types/meta\";\nimport { FNDimension } from \"../types/meta-fn\";\n\nexport const cssDimension = (\n  cur: { dim?: FNDimension; type: MetaItem[\"type\"] },\n  mode?: \"mobile\" | \"desktop\",\n  editor?: boolean\n) => {\n  const dim = responsiveVal<FNDimension>(cur, \"dim\", mode, {\n    h: \"fit\",\n    w: \"fit\",\n  });\n\n  if (dim.w === \"full\" && dim.h === \"full\") {\n    return `\n      width:100%;\n      height:100%;\n      flex:1;\n    `;\n  }\n\n  return cx(\n    dim.w === \"fit\" &&\n      `\n        & > .txt-box > * {\n          white-space: nowrap !important;\n        }\n      `,\n    dim.w === \"full\" &&\n      `\n        width: 100%;\n      `,\n    dim.w &&\n      typeof dim.w === \"number\" &&\n      dim.w >= 0 &&\n      `\n        width: ${dim.w}${dim.wUnit || \"px\"};\n        overflow-x: clip;\n      `,\n    dim.h === \"full\" &&\n      `\n        height: ${\n          editor\n            ? \"100%\"\n            : \"100\" +\n              (cur.type === \"section\" ? (mode === \"mobile\" ? \"vh\" : \"vh\") : \"%\")\n        };\n        margin-bottom: auto;\n      `,\n\n    dim.h &&\n      typeof dim.h === \"number\" &&\n      dim.h >= 0 &&\n      `\n        height: ${dim.h}${dim.hUnit || \"px\"};\n        overflow-y: clip;\n      `\n  );\n};\n","import { IItem } from \"utils/types/item\";\n\nexport const cssEditor = ({\n  item,\n  hover,\n  active,\n}: {\n  item: IItem;\n  hover?: boolean;\n  active?: boolean;\n}) => {\n  return cx(\n    hover &&\n      css`\n        & {\n          box-shadow: inset 0 0 0px 3px #bae3fd;\n          > img {\n            opacity: 0.6;\n          }\n        }\n      `,\n    active &&\n      css`\n        box-shadow: inset 0 0 0px 2px #009cff !important;\n        > img {\n          opacity: 0.6;\n        }\n      `\n  );\n};\n","import { responsiveVal } from \"vi/lib/responsive-val\";\nimport { MetaItem } from \"../types/meta\";\nimport { FNFont } from \"../types/meta-fn\";\n\nexport const glbFont = window as unknown as {\n  defaultFont: string;\n  loadedFonts: string[];\n};\n\nexport const cssFont = (\n  cur: { font?: FNFont; type: MetaItem[\"type\"] },\n  mode?: \"mobile\" | \"desktop\"\n) => {\n  const font = responsiveVal<FNFont>(cur, \"font\", mode, {});\n\n  if (font.family) {\n    if (!glbFont.loadedFonts) glbFont.loadedFonts = [];\n    const weight = `:wght@${[300, 400, 500, 600, 700, 800].join(\";\")}`;\n    const fontName = font.family.replace(/ /g, \"+\");\n\n    if (glbFont.loadedFonts.indexOf(font.family) < 0) {\n      glbFont.loadedFonts.push(font.family);\n      const doc = document;\n      const _href = `https://fonts.googleapis.com/css2?family=${fontName}${weight}&display=swap`;\n      if (!doc.querySelector(`link[href=\"${_href}]`)) {\n        const link = doc.createElement(\"link\");\n        link.type = \"text/css\";\n        link.rel = \"stylesheet\";\n        link.crossOrigin = \"anonymous\";\n        link.href = _href;\n        doc.head.appendChild(link);\n      }\n    }\n  }\n\n  if (!font.family && glbFont.defaultFont) {\n    font.family = glbFont.defaultFont;\n  }\n\n  const res = cx(\n    font.color &&\n      `\n        color: ${font.color};\n      `,\n    font.whitespace === \"whitespace-normal\" &&\n      `\n      word-break: break-word;\n    `,\n    font.whitespace === \"whitespace-nowrap\" &&\n      `\n        white-space: nowrap;\n      `,\n    font.color &&\n      `\n        color: ${font.color};\n      `,\n    `\n      text-align: ${font.align ? font.align : \"left\"};\n    `,\n    font.size &&\n      `\n        font-size: ${font.size || 15}px;\n      `,\n    font.height &&\n      `\n        line-height: ${font.height === \"auto\" ? \"normal\" : `${font.height}%`};\n      `,\n    font.family &&\n      `\n        font-family: ${font.family};\n      `\n  );\n\n  return res;\n};\n","import { responsiveVal } from \"vi/lib/responsive-val\";\nimport { FNLayout } from \"../types/meta-fn\";\n\nexport const cssLayout = (\n  cur: { layout?: FNLayout },\n  mode?: \"mobile\" | \"desktop\"\n) => {\n  const result: string[] = [];\n  let layout = responsiveVal<FNLayout>(cur, \"layout\", mode, {\n    dir: \"col\",\n    align: \"top-left\",\n    gap: 0,\n    wrap: undefined,\n  });\n\n  if (layout) {\n    if (layout.wrap) {\n      result.push(\n        layout.wrap === \"flex-wrap\" ? \"flex-wrap: wrap;\" : \"flex-wrap: nowrap;\"\n      );\n    }\n    if (layout.dir.startsWith(\"col\")) {\n      if (layout.dir === \"col\") {\n        result.push(\"flex-direction: column;\");\n      } else if (layout.dir === \"col-reverse\") {\n        result.push(\"flex-direction: column-reverse;\");\n      }\n      if (layout.gap === \"auto\") {\n        if (layout.align === \"left\")\n          result.push(\"align-items:start; justify-content: space-between;\");\n        if (layout.align === \"center\")\n          result.push(\"align-items:center; justify-content: space-between;\");\n        if (layout.align === \"right\")\n          result.push(\"align-items:end; justify-content: space-between;\");\n      } else {\n        result.push(`gap: ${layout.gap}px;`);\n\n        if (layout.align === \"top-left\")\n          result.push(\"align-items:start; justify-content: start;\");\n        if (layout.align === \"top-center\")\n          result.push(\"align-items:center; justify-content: start;\");\n        if (layout.align === \"top-right\")\n          result.push(\"align-items:end; justify-content: start;\");\n\n        if (layout.align === \"left\")\n          result.push(\"align-items:start; justify-content: center;\");\n        if (layout.align === \"center\")\n          result.push(\"align-items:center; justify-content: center;\");\n        if (layout.align === \"right\")\n          result.push(\"align-items:end; justify-content: center;\");\n\n        if (layout.align === \"bottom-left\")\n          result.push(\"align-items:start; justify-content: end;\");\n        if (layout.align === \"bottom-center\")\n          result.push(\"align-items:center; justify-content: end;\");\n        if (layout.align === \"bottom-right\")\n          result.push(\"align-items:end; justify-content: end;\");\n      }\n    } else {\n      if (layout.dir === \"row\") {\n        result.push(\"flex-direction: row;\");\n      } else if (layout.dir === \"row-reverse\") {\n        result.push(\"flex-direction: row-reverse;\");\n      }\n\n      if (layout.gap === \"auto\") {\n        if (layout.align === \"top\")\n          result.push(\"align-items:start; justify-content: space-between;\");\n        if (layout.align === \"center\")\n          result.push(\"align-items:center; justify-content: space-between;\");\n        if (layout.align === \"bottom\")\n          result.push(\"align-items:end; justify-content: space-between;\");\n      } else {\n        result.push(\n          `\n            gap: ${layout.gap}px;\n          `\n        );\n\n        if (layout.align === \"top-left\")\n          result.push(\"align-items:start; justify-content: start;\");\n        if (layout.align === \"top-center\")\n          result.push(\"align-items:start; justify-content: center;\");\n        if (layout.align === \"top-right\")\n          result.push(\"align-items:start; justify-content: end;\");\n\n        if (layout.align === \"left\")\n          result.push(\"align-items:center; justify-content: start;\");\n        if (layout.align === \"center\")\n          result.push(\"align-items:center; justify-content: center;\");\n        if (layout.align === \"right\")\n          result.push(\"align-items:center; justify-content: end;\");\n\n        if (layout.align === \"bottom-left\")\n          result.push(\"align-items:end; justify-content: start;\");\n        if (layout.align === \"bottom-center\")\n          result.push(\"align-items:end; justify-content: center;\");\n        if (layout.align === \"bottom-right\")\n          result.push(\"align-items:end; justify-content: end;\");\n      }\n    }\n  } else {\n    return \"flex-direction:column; align-items:start; justify-content: start;\";\n  }\n  return result.join(\"\\n\\t\").trim();\n};\n","import { responsiveVal } from \"vi/lib/responsive-val\";\nimport { FNPadding } from \"../types/meta-fn\";\n\nexport const cssPadding = (\n  cur: { padding?: FNPadding },\n  mode?: \"mobile\" | \"desktop\"\n) => {\n  const padding = responsiveVal<FNPadding>(cur, \"padding\", mode, {\n    l: 0,\n    b: 0,\n    t: 0,\n    r: 0,\n  });\n\n  return cx(\n    padding.l !== undefined &&\n      `\n        padding-left: ${padding.l}px;\n      `,\n    padding.r !== undefined &&\n      `\n        padding-right: ${padding.r}px;\n      `,\n    padding.b !== undefined &&\n      `\n        padding-bottom: ${padding.b}px;\n      `,\n    padding.t !== undefined &&\n      `\n        padding-top: ${padding.t}px; \n      `\n  );\n};\n","import { IItem } from \"../types/item\";\nimport { cssAdv } from \"./advanced\";\nimport { cssBackground } from \"./background\";\nimport { cssBorder } from \"./border\";\nimport { cssDimension } from \"./dimension\";\nimport { cssEditor } from \"./editor\";\nimport { cssFont } from \"./font\";\nimport { cssLayout } from \"./layout\";\nimport { cssPadding } from \"./padding\";\n\nexport const produceCSS = (\n  item: IItem,\n  arg: {\n    mode: \"mobile\" | \"desktop\";\n    hover?: boolean;\n    active?: boolean;\n    editor?: boolean;\n  }\n): string => {\n  try {\n    return cx([\n      item.id ? `s-${item.id}` : \"\",\n      css`\n        display: flex;\n        position: relative;\n        user-select: none;\n        ${cssLayout(item, arg.mode)}\n        ${cssPadding(item, arg.mode)}\n        ${cssDimension(item, arg.mode, arg?.editor)}\n        ${cssBorder(item, arg.mode)}\n        ${cssBackground(item, arg.mode)}\n        ${cssFont(item, arg.mode)}\n      `,\n      (arg?.hover || arg?.active) &&\n        cssEditor({ item, hover: arg?.hover, active: arg?.active }),\n      cssAdv(item, arg.mode),\n    ]);\n  } catch (e) {\n    console.log(e);\n  }\n  return cx([]);\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { produceCSS } from \"utils/css/gen\";\nimport { IItem } from \"utils/types/item\";\n\nexport type DIV_PROPS = React.DetailedHTMLProps<\n  React.HTMLAttributes<HTMLDivElement>,\n  HTMLDivElement\n>;\n\nexport const viDivProps = (\n  item: DeepReadonly<IItem>,\n  opt: { mode: \"desktop\" | \"mobile\"; div_props?: DIV_PROPS }\n) => {\n  if (item.adv?.tailwind) {\n    let s = document.querySelector(`style#${item.id}`);\n    if (!s) {\n      s = document.createElement(\"style\");\n      s.id = item.id;\n      document.head.appendChild(s);\n    }\n    s.innerHTML = item.adv.tailwind;\n  }\n\n  const props: DIV_PROPS & { inherit?: { style: IItem; className: string } } = {\n    ...(opt?.div_props || {}),\n    className: cx(\n      produceCSS(item as any, {\n        mode: opt.mode,\n      }),\n      item.type === \"text\" && !item.adv?.js ? \"text-block\" : \"\",\n      opt?.div_props?.className\n    ),\n  };\n\n  delete props.children;\n\n  if (item.adv?.html) {\n    props.dangerouslySetInnerHTML = { __html: item.adv?.html };\n  }\n\n  return props;\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { FC } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { ViRender } from \"./vi-render\";\nimport { useVi } from \"./lib/store\";\nimport { ViMergedProps } from \"./lib/types\";\n\nexport const ViChilds: FC<{\n  item: DeepReadonly<{ id: string; childs: IItem[] }>;\n  is_layout: boolean;\n  instance_id?: string;\n  merged?: ViMergedProps;\n  standalone?: string;\n}> = ({ item, is_layout, instance_id, merged, standalone }) => {\n  const { parents } = useVi(\n    ({ state, ref }) => ({\n      parents: ref.item_parents,\n    }),\n    standalone\n  );\n\n  const childs = item.childs;\n  return childs.map((child) => {\n    parents[child.id] = item.id;\n    return (\n      <ViRender\n        key={child.id}\n        merged={merged}\n        instance_id={instance_id}\n        item={child}\n        is_layout={is_layout}\n        standalone={standalone}\n      />\n    );\n  });\n};\n","type RapidSecret = [bigint, bigint, bigint];\ntype RapidMix = (a: bigint, b: bigint) => bigint;\ntype RapidhashEpilogue = (\n  a: bigint,\n  b: bigint,\n  secret: RapidSecret,\n  len: bigint\n) => bigint;\n\nconst RAPID_SEED = 0xbdd89aa982704029n;\nconst rapid_secret: RapidSecret = [\n  0x2d358dccaa6c78a5n,\n  0x8bb84b93962eacc9n,\n  0x4b33a62ed433d4a3n,\n];\n\nfunction rapid_mix_fast(a: bigint, b: bigint): bigint {\n  const m = a * b;\n  return BigInt.asUintN(64, m) ^ (m >> 64n);\n}\n\nfunction rapidhash_epilogue_fast(\n  a: bigint,\n  b: bigint,\n  secret: RapidSecret,\n  len: bigint\n): bigint {\n  const m0 = a * b;\n  const m1 =\n    (BigInt.asUintN(64, m0) ^ secret[0] ^ len) * ((m0 >> 64n) ^ secret[1]);\n  return BigInt.asUintN(64, m1) ^ (m1 >> 64n);\n}\n\nfunction rapid_mix_protected(a: bigint, b: bigint): bigint {\n  const m = a * b;\n  return BigInt.asUintN(64, m) ^ (m >> 64n) ^ a ^ b;\n}\n\nfunction rapidhash_epilogue_protected(\n  a0: bigint,\n  b0: bigint,\n  secret: RapidSecret,\n  len: bigint\n): bigint {\n  const m0 = a0 * b0;\n  const a1 = BigInt.asUintN(64, m0) ^ secret[0] ^ len ^ a0;\n  const b1 = (m0 >> 64n) ^ secret[1] ^ b0;\n  const m1 = a1 * b1;\n  return BigInt.asUintN(64, m1) ^ (m1 >> 64n) ^ a1 ^ b1;\n}\n\nconst read32x2Buffer = new Uint8Array(8);\nconst read32x2View = new DataView(read32x2Buffer.buffer);\n\nfunction rapid_read32x2(\n  buf: DataView,\n  offset1: number,\n  offset2: number\n): bigint {\n  read32x2View.setUint32(4, buf.getUint32(offset1, true), true);\n  read32x2View.setUint32(0, buf.getUint32(offset2, true), true);\n  return read32x2View.getBigUint64(0, true);\n}\n\nfunction rapid_read64(buf: DataView, offset: number): bigint {\n  return buf.getBigUint64(offset, true);\n}\n\nconst readSmallBuffer = new Uint8Array(8);\nconst readSmallView = new DataView(readSmallBuffer.buffer);\n\nfunction rapid_readSmall(buf: DataView, offset: number, k: number): bigint {\n  readSmallBuffer[7] = buf.getUint8(offset);\n  readSmallBuffer[4] = buf.getUint8(offset + (k >> 1));\n  readSmallBuffer[0] = buf.getUint8(offset + k - 1);\n  return readSmallView.getBigUint64(0, true);\n}\n\nfunction rapidhash_internal(\n  key: DataView,\n  seed: bigint,\n  secret: RapidSecret,\n  rapid_mix: RapidMix,\n  rapidhash_epilogue: RapidhashEpilogue\n): bigint {\n  const len = key.byteLength;\n  const lenBI = BigInt(key.byteLength);\n\n  seed ^= rapid_mix(seed ^ secret[0], secret[1]) ^ lenBI;\n\n  let a: bigint;\n  let b: bigint;\n\n  if (len <= 16) {\n    if (len >= 4) {\n      const last = len - 4;\n      a = rapid_read32x2(key, 0, last);\n      const delta = (len & 24) >> (len >> 3);\n      b = rapid_read32x2(key, delta, last - delta);\n    } else if (len > 0) {\n      a = rapid_readSmall(key, 0, len);\n      b = 0n;\n    } else {\n      a = 0n;\n      b = 0n;\n    }\n  } else {\n    let i = len;\n    let p = 0;\n\n    if (i > 48) {\n      let see1 = seed,\n        see2 = seed;\n      while (i >= 96) {\n        seed = rapid_mix(\n          rapid_read64(key, p) ^ secret[0],\n          rapid_read64(key, p + 8) ^ seed\n        );\n        see1 = rapid_mix(\n          rapid_read64(key, p + 16) ^ secret[1],\n          rapid_read64(key, p + 24) ^ see1\n        );\n        see2 = rapid_mix(\n          rapid_read64(key, p + 32) ^ secret[2],\n          rapid_read64(key, p + 40) ^ see2\n        );\n        seed = rapid_mix(\n          rapid_read64(key, p + 48) ^ secret[0],\n          rapid_read64(key, p + 56) ^ seed\n        );\n        see1 = rapid_mix(\n          rapid_read64(key, p + 64) ^ secret[1],\n          rapid_read64(key, p + 72) ^ see1\n        );\n        see2 = rapid_mix(\n          rapid_read64(key, p + 80) ^ secret[2],\n          rapid_read64(key, p + 88) ^ see2\n        );\n        p += 96;\n        i -= 96;\n      }\n      if (i >= 48) {\n        seed = rapid_mix(\n          rapid_read64(key, p) ^ secret[0],\n          rapid_read64(key, p + 8) ^ seed\n        );\n        see1 = rapid_mix(\n          rapid_read64(key, p + 16) ^ secret[1],\n          rapid_read64(key, p + 24) ^ see1\n        );\n        see2 = rapid_mix(\n          rapid_read64(key, p + 32) ^ secret[2],\n          rapid_read64(key, p + 40) ^ see2\n        );\n        p += 48;\n        i -= 48;\n      }\n\n      seed ^= see1 ^ see2;\n    }\n\n    if (i > 16) {\n      seed = rapid_mix(\n        rapid_read64(key, p) ^ secret[2],\n        rapid_read64(key, p + 8) ^ seed ^ secret[1]\n      );\n      if (i > 32) {\n        seed = rapid_mix(\n          rapid_read64(key, p + 16) ^ secret[2],\n          rapid_read64(key, p + 24) ^ seed\n        );\n      }\n    }\n    a = rapid_read64(key, p + i - 16);\n    b = rapid_read64(key, p + i - 8);\n  }\n  a ^= secret[1];\n  b ^= seed;\n\n  return rapidhash_epilogue(a, b, secret, lenBI);\n}\n\ntype RapidMumBehaviour = \"fast\" | \"protected\";\nconst defaultRapidMumBehaviour: RapidMumBehaviour = \"fast\";\nconst rapidMumImplementations: {\n  [behaviour in RapidMumBehaviour]: {\n    rapid_mix: RapidMix;\n    rapidhash_epilogue: RapidhashEpilogue;\n  };\n} = {\n  fast: {\n    rapid_mix: rapid_mix_fast,\n    rapidhash_epilogue: rapidhash_epilogue_fast,\n  },\n  protected: {\n    rapid_mix: rapid_mix_protected,\n    rapidhash_epilogue: rapidhash_epilogue_protected,\n  },\n};\n\ninterface RapidhashOptions {\n  seed: bigint;\n  rapidMumBehaviour: RapidMumBehaviour;\n}\n\nfunction isBigUint64(value: bigint): boolean {\n  return value >= 0n && value <= 0xffff_ffff_ffff_ffffn;\n}\n\nfunction validateOptions(\n  options: Partial<RapidhashOptions> | undefined\n): RapidhashOptions {\n  const result: RapidhashOptions = {\n    seed: RAPID_SEED,\n    rapidMumBehaviour: defaultRapidMumBehaviour,\n  };\n\n  if (options === undefined) {\n    return result;\n  }\n\n  if (options.seed !== undefined) {\n    if (!isBigUint64(options.seed)) {\n      throw new Error(\n        `seed must be a 64-bit unsigned bigint value: ${options.seed}`\n      );\n    }\n    result.seed = options.seed;\n  }\n\n  if (options.rapidMumBehaviour !== undefined) {\n    result.rapidMumBehaviour = options.rapidMumBehaviour;\n  }\n\n  return result;\n}\n\nconst textEncoder = new TextEncoder();\nconst utf8BufferSize = 2048;\nconst stringLengthThresholdToUseBuffer = utf8BufferSize / 3;\nconst utf8Buffer = new Uint8Array(utf8BufferSize);\n\nfunction toDataView(message: string | Uint8Array | DataView): DataView {\n  if (typeof message === \"string\") {\n    if (message.length <= stringLengthThresholdToUseBuffer) {\n      const { written } = textEncoder.encodeInto(message, utf8Buffer);\n      return new DataView(utf8Buffer.buffer, 0, written);\n    }\n\n    const utf8bytes = textEncoder.encode(message);\n    return new DataView(\n      utf8bytes.buffer,\n      utf8bytes.byteOffset,\n      utf8bytes.byteLength\n    );\n  }\n\n  if (message instanceof Uint8Array) {\n    return new DataView(message.buffer, message.byteOffset, message.byteLength);\n  }\n\n  return message;\n}\n\n/**\n * Calculate a 64-bit hash value of the given message.\n *\n * @param message {string|Uint8Array|DataView} The message to be hashed.\n * @param options Options for modifying the hash calculation.\n * @param options.seed {bigint} 64-bit unsigned seed value.\n * @param options.rapidMumBehaviour {'fast'|'protected'} Alters behaviour of the rapid_mum function. Defaults to 'fast'.\n */\nexport function rapidhash(\n  message: string | Uint8Array | DataView,\n  options?: Partial<RapidhashOptions>\n): bigint {\n  const { seed, rapidMumBehaviour } = validateOptions(options);\n  const { rapid_mix, rapidhash_epilogue } =\n    rapidMumImplementations[rapidMumBehaviour];\n\n  return rapidhash_internal(\n    toDataView(message),\n    seed,\n    rapid_secret,\n    rapid_mix,\n    rapidhash_epilogue\n  );\n}\n\n/**\n * Calculate a 64-bit hash value of the given message.\n * This function is equivalent to rapidhash() with options.rapidMumBehaviour set to 'fast'.\n *\n * @param message {string|Uint8Array|DataView} The message to be hashed.\n * @param options Options for modifying the hash calculation.\n * @param options.seed {bigint} 64-bit unsigned seed value.\n */\nexport function rapidhash_fast(\n  message: string | Uint8Array | DataView,\n  options?: Partial<Omit<RapidhashOptions, \"rapidMumBehaviour\">>\n): bigint {\n  const { seed } = validateOptions(options);\n\n  return rapidhash_internal(\n    toDataView(message),\n    seed,\n    rapid_secret,\n    rapid_mix_fast,\n    rapidhash_epilogue_fast\n  );\n}\n\n/**\n * Calculate a 64-bit hash value of the given message.\n * This function is equivalent to rapidhash() with options.rapidMumBehaviour set to 'protected'.\n *\n * @param message {string|Uint8Array|DataView} The message to be hashed.\n * @param options Options for modifying the hash calculation.\n * @param options.seed {bigint} 64-bit unsigned seed value.\n */\nexport function rapidhash_protected(\n  message: string | Uint8Array | DataView,\n  options?: Partial<Omit<RapidhashOptions, \"rapidMumBehaviour\">>\n): bigint {\n  const { seed } = validateOptions(options);\n\n  return rapidhash_internal(\n    toDataView(message),\n    seed,\n    rapid_secret,\n    rapid_mix_protected,\n    rapidhash_epilogue_protected\n  );\n}\n","export const parentCompArgs = (\n  parents: Record<string, string>,\n  ref_comps: Record<string, any>,\n  id: string\n) => {\n  let cur_id = id;\n  const args: any = {};\n  let i = 0;\n\n  while (parents[cur_id]) {\n    if (ref_comps[cur_id]) {\n      for (const [k, v] of Object.entries(ref_comps[cur_id])) {\n        if (typeof args[k] === \"undefined\") {\n          args[k] = v;\n        }\n      }\n    }\n    cur_id = parents[cur_id];\n    i++;\n    if (i > 1000) {\n      console.error(\"ERROR: item parent is cycling to child\");\n      break;\n    }\n  }\n  return args;\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport * as React from \"react\";\nimport { ReactElement } from \"react\";\nimport { IItem } from \"utils/types/item\";\n\nexport const scriptArgs = (opt: {\n  item: DeepReadonly<IItem>;\n  childs: ReactElement | null;\n  props: React.ClassAttributes<HTMLDivElement> &\n    React.HTMLAttributes<HTMLDivElement> & {\n      inherit?: {\n        style: IItem;\n        className: string;\n      };\n    };\n  result: { children: ReactElement | null };\n}) => {\n  const args: any = {\n    React: React,\n    props: opt.props,\n    render(children: any) {\n      opt.result.children = children;\n    },\n    children: opt.childs,\n  };\n\n  return args;\n};\n","import { FC, ReactNode } from \"react\";\n\nexport const IF: FC<{\n  condition?: boolean;\n  then: ReactNode;\n  else?: ReactNode;\n}> = (opt) => {\n  if (opt.condition) {\n    return opt.then;\n  }\n  return opt.else || null;\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { ReactElement, useEffect } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { getVersion, proxy, ref, useSnapshot } from \"valtio\";\nimport { local_name } from \"./vi-local\";\nimport { ViMergedProps } from \"vi/lib/types\";\n\nexport const ViLocalAutoRender = (opt: {\n  name: string;\n  value: any;\n  effect: (local: any) => void;\n  children: ReactElement;\n  item: DeepReadonly<IItem>;\n  local_value: Record<string, any>;\n  local_render: Record<string, () => void>;\n  merged: ViMergedProps;\n  deps?: any[];\n}) => {\n  const { local_render, local_value, item, value, effect, children, deps } =\n    opt;\n\n  const resetLocal = () => {\n    const local = {\n      __autorender: true,\n      [local_name]: value[local_name],\n      __version: 0,\n      __item_id: item.id,\n      proxy: proxy({\n        ...value,\n        render: ref(() => {\n          console.warn(\n            `🛟 Warning: local.render() is ignored in <Local> with auto_render.`\n          );\n        }),\n      }),\n    };\n    local.proxy.set = ref(local.proxy);\n    return local;\n  };\n\n  if (!local_value[opt.name]) {\n    local_value[opt.name] = resetLocal();\n  }\n\n  opt.merged[opt.name] = local_value[opt.name];\n\n  const internal = local_value[opt.name] as {\n    __version: number;\n    __autorender: boolean;\n    __item_id: string;\n    proxy: any;\n  };\n\n  const valtio_version = getVersion(internal.proxy) || 0;\n  useEffect(() => {\n    const should_render = internal.__version > 0;\n    if (internal.__version !== valtio_version) {\n      internal.__version = valtio_version;\n      if (should_render) {\n        local_render[item.id]?.();\n      } else {\n        effect(internal.proxy);\n      }\n    }\n  }, [valtio_version]);\n\n  useEffect(() => {\n    if ((deps || []).length > 0 && internal.__version > 0) {\n      local_value[opt.name] = resetLocal();\n      effect(internal.proxy);\n    }\n  }, [...(deps || [])]);\n\n  return children;\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { isValidElement, useEffect, useRef } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { ViMergedProps } from \"vi/lib/types\";\nimport { ViLocalAutoRender } from \"./vi-local-auto-render\";\n\nexport const render_mode = Symbol(\"render_mode\");\nexport const local_name = Symbol(\"local_name\");\n\nexport const createViLocal = (\n  item: DeepReadonly<IItem>,\n  local_value: Record<string, any>,\n  local_render: Record<string, () => void>,\n  merged: ViMergedProps\n) => {\n  return (opt: {\n    name: string;\n    value: any;\n    proxy?: any;\n    effect: (local: any) => void;\n    children: any;\n    deps?: any[];\n  }) => {\n    let children = opt.children || {};\n\n    if (Array.isArray(opt.children)) {\n      children = opt.children.map((e) => {\n        if (isValidElement(e)) {\n          return { ...e, props: { ...(e.props || {}), merged } };\n        }\n        return e;\n      });\n    } else {\n      children = {\n        ...children,\n        props: { ...(children.props || {}), merged },\n      };\n    }\n\n    const deps = useRef({ init: false }).current;\n\n    if (opt.value[render_mode] === \"auto\") {\n      return (\n        <ViLocalAutoRender\n          {...opt}\n          children={children}\n          item={item}\n          local_render={local_render}\n          local_value={local_value}\n          merged={merged}\n        />\n      );\n    }\n\n    const resetLocal = () => {\n      local_value[opt.name] = {\n        ...opt.value,\n        render() {\n          local_render[item.id]();\n        },\n      };\n    };\n    if (Object.keys(local_value).length === 0) {\n      resetLocal();\n    }\n    for (const [k, v] of Object.entries(local_value)) {\n      merged[k] = v;\n    }\n\n    useEffect(() => {\n      opt.effect(local_value[opt.name]);\n    }, []);\n\n    useEffect(() => {\n      if ((opt.deps || []).length > 0) {\n        if (!deps.init) {\n          deps.init = false;\n          return;\n        } else {\n          resetLocal();\n          opt.effect(local_value[opt.name]);\n        }\n      }\n    }, opt.deps || []);\n\n    return children;\n  };\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport {\n  cloneElement,\n  isValidElement,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { ViMergedProps } from \"vi/lib/types\";\n\nexport const createViLoop = (\n  item: DeepReadonly<IItem>,\n  children: any,\n  merged: ViMergedProps\n) => {\n  return ({\n    bind: { list, loop_name: name, key },\n  }: {\n    bind: {\n      list: any[];\n      loop_name: string;\n      key: (arg: { item: any; index: number }) => any;\n    };\n  }) => {\n    const internal_item_ref = useRef({ map: new WeakMap(), count: 0 });\n    const item_ref = internal_item_ref.current;\n    const item_map = internal_item_ref.current.map;\n\n    const [, render] = useState({});\n    useEffect(() => {\n      if (item_ref.count > 0) {\n        internal_item_ref.current = { map: new WeakMap(), count: 0 };\n        render({});\n      }\n    }, [children]);\n\n    if (!list || (list && !Array.isArray(list))) return null;\n\n    return list.map((item, index) => {\n      if (item_map.has(item)) return item_map.get(item);\n      else {\n        const new_key = key ? key({ item, index }) : index;\n        const _merged = {\n          ...merged,\n          [name]: item,\n          [`${name}_idx`]: index,\n          __internal: {\n            ...merged.__internal,\n            [name]: { from_id: item.id, type: \"loop\" },\n            [`${name}_idx`]: { from_id: item.id, type: \"loop\" },\n          },\n        };\n\n        const result = cloneElement(children, {\n          key: new_key,\n          ...(children.props || {}),\n          merged: _merged,\n        });\n        item_ref.count++;\n        if (typeof item === \"object\" && item) {\n          item_map.set(item, result);\n        }\n        return result;\n      }\n    });\n  };\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { cloneElement, isValidElement } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { ViMergedProps } from \"vi/lib/types\";\n\nexport const createViPassProp = (\n  item: DeepReadonly<IItem>,\n  merged: ViMergedProps\n) => {\n  return function (this: any, arg: { children: any } & Record<string, any>) {\n    const idx = arg.idx || \"0\";\n\n    for (const [k, v] of Object.entries(arg)) {\n      if (k !== \"children\") {\n        merged[k] = v;\n        merged.__internal[k] = { from_id: item.id, type: \"passprop\" };\n      }\n    }\n    \n    if (!arg.children) {\n      return null;\n    }\n\n    return cloneElement(arg.children, {\n      key: idx,\n      ...(arg.children.props || {}),\n      merged: merged,\n    });\n  };\n};\n","import { rapidhash_fast } from \"crdt/node/rapidhash\";\nimport { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { waitUntil } from \"prasi-utils\";\nimport React, { FC, ReactElement, useEffect } from \"react\";\nimport { useLocal } from \"utils/react/use-local\";\nimport { IItem } from \"utils/types/item\";\nimport { useSnapshot } from \"valtio\";\nimport { ErrorBox } from \"./lib/error-box\";\nimport { parentCompArgs } from \"./lib/parent-comp-args\";\nimport { scriptArgs } from \"./lib/script-args\";\nimport { useVi } from \"./lib/store\";\nimport { ViMergedProps } from \"./lib/types\";\nimport { IF } from \"./script/vi-if\";\nimport { createViLocal, local_name, render_mode } from \"./script/vi-local\";\nimport { createViLoop } from \"./script/vi-loop\";\nimport { createViPassProp } from \"./script/vi-pass-prop\";\n\nexport const ViScript: FC<{\n  is_layout: boolean;\n  item: DeepReadonly<IItem>;\n  childs: ReactElement | null;\n  props: React.ClassAttributes<HTMLDivElement> &\n    React.HTMLAttributes<HTMLDivElement> & {\n      inherit?: {\n        style: IItem;\n        className: string;\n      };\n    };\n  merged?: ViMergedProps;\n  instance_id?: string;\n  standalone?: string;\n  render: () => void;\n}> = ({ is_layout, item, childs, props, merged, render, standalone }) => {\n  const internal = useLocal({\n    Local: undefined as any,\n    PassProp: undefined as any,\n    Loop: undefined as any,\n    item: undefined as any,\n    ScriptComponent: null as any,\n    watch_auto_render: {} as Record<string, any>,\n    arg_hash: \"\",\n    value: {} as Record<string, any>,\n  });\n  const {\n    comp_props_parents,\n    parents,\n    db,\n    api,\n    vscode_exports,\n    local_render,\n    dev_item_error: dev_item_error,\n    dev_tree_render,\n  } = useVi(\n    ({ ref }) => ({\n      comp_props_parents: ref.comp_props,\n      parents: ref.item_parents,\n      db: ref.db,\n      api: ref.api,\n      local_render: ref.local_render,\n      dev_item_error: ref.dev_item_error,\n      dev_tree_render: ref.dev_tree_render,\n      vscode_exports: ref.vscode_exports,\n    }),\n    standalone\n  );\n\n  local_render[item.id] = render;\n  const result = { children: null as any };\n  const script_args = scriptArgs({ item, childs, props, result });\n\n  const _merged: ViMergedProps = {\n    ...merged,\n    __internal: { ...merged?.__internal },\n  };\n\n  const valtio_snapshot = {} as Record<string, any>;\n\n  if (internal.item !== item) {\n    internal.item = item;\n    internal.Local = createViLocal(item, internal.value, local_render, _merged);\n    internal.PassProp = createViPassProp(item, _merged);\n    internal.Loop = createViLoop(item, childs, _merged);\n    if (internal.watch_auto_render) {\n      for (const cleanupAutoDispatch of Object.values(\n        internal.watch_auto_render\n      )) {\n        cleanupAutoDispatch();\n      }\n    }\n    internal.watch_auto_render = {};\n  }\n\n  for (const [k, v] of Object.entries(_merged)) {\n    if (v.__autorender && v.proxy && v.__item_id !== item.id) {\n      valtio_snapshot[k] = useSnapshot(v.proxy);\n      // this is a hack to make valtio only watch accessed properties\n      // and not all properties of the object\n      valtio_snapshot[k].__autorender;\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      for (const cleanup of Object.values(internal.watch_auto_render)) {\n        cleanup();\n      }\n    };\n  }, []);\n\n  const comp_args = parentCompArgs(parents, comp_props_parents, item.id);\n\n\n  const jsx = {} as Record<string, any>;\n  for (const [k, v] of Object.entries(comp_args)) {\n    if (typeof v === \"object\" && v && (v as any).__jsx) {\n      jsx[k] = (v as any).__render(item, parents, _merged, is_layout);\n    }\n  }\n\n  const defineLocal = (arg: {\n    name: string;\n    value: any;\n    render_mode: \"auto\" | \"manual\";\n  }) => {\n    arg.value[local_name] = arg.name;\n    arg.value[render_mode] = arg.render_mode;\n    if (arg.render_mode === \"auto\") {\n      arg.value.set = new Proxy(\n        {},\n        {\n          get(target, p, receiver) {\n            return internal.value[arg.name]?.proxy?.[p];\n          },\n        }\n      );\n    } else {\n      arg.value.render = render;\n    }\n    return arg.value;\n  };\n\n  const defineLoop = (arg: { list: any[]; loop_name: string }) => {\n    return arg;\n  };\n\n  const final_args = {\n    ...vscode_exports,\n    ...comp_args,\n    ...script_args,\n    ..._merged,\n    ...valtio_snapshot,\n    ...jsx,\n    db,\n    api,\n    __js: removeRegion(item.adv!.js || \"\"),\n    defineLocal,\n    defineLoop,\n    PassProp: internal.PassProp,\n    Local: internal.Local,\n    Loop: internal.Loop,\n    React,\n    IF,\n    __result: result,\n    createElement: function (...arg: any[]) {\n      if (arg && Array.isArray(arg) && arg[0] === internal.PassProp && arg[1]) {\n        if (!arg[1].idx && arg[1].key) {\n          arg[1].idx = arg[1].key;\n        } else if (arg[1].idx && !arg[1].key) {\n          arg[1].key = arg[1].idx;\n        }\n      }\n\n      return (React.createElement as any)(...arg);\n    },\n  };\n\n  const arg_hash = rapidhash_fast(Object.keys(final_args).join(\"-\")).toString();\n  const isEditor = (window as any).isEditor as boolean;\n\n  if (!internal.ScriptComponent || internal.arg_hash !== arg_hash) {\n    let src = (item.adv!.jsBuilt || \"\").replace(\n      /React\\.createElement/g,\n      \"createElement\"\n    );\n    if (!isEditor) {\n      src = `\\\ntry {  \n  ${src}\\\n} catch(e) {\n  console.error(e);\n}`;\n    }\n\n    let src_fn = \"\";\n\n    src_fn = `\\\n// ${item.name}: ${item.id} \n\n${Object.keys(final_args)\n  .map((e) => {\n    return `const ${e} = p.${e}`;\n  })\n  .join(\";\\n\")}\n\n{\n  ${src}\\\n}\n\nreturn __result.children;\n`;\n\n    internal.ScriptComponent = new Function(\"p\", src_fn);\n    internal.arg_hash = arg_hash;\n  }\n  final_args.__src = item.adv!.js;\n  if (!isEditor) {\n    return <internal.ScriptComponent {...final_args} />;\n  }\n\n\n  return (\n    <ErrorBox\n      silent={true}\n      error_jsx={isEditor ? undefined : null}\n      onError={async (e) => {\n        if (isEditor) {\n          dev_item_error[item.id] = e;\n          waitUntil(() => dev_tree_render[item.id]).then(() => {\n            if (dev_tree_render[item.id]) dev_tree_render[item.id]();\n          });\n        }\n      }}\n    >\n      <internal.ScriptComponent {...final_args} />\n    </ErrorBox>\n  );\n};\n\nconst removeRegion = (src: string) => {\n  if (src.startsWith(\"// #region\")) {\n    const end = src.indexOf(\"// #endregion\");\n    return src.substring(end + 13).trim();\n  }\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { FC, useState } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { DIV_PROPS, viDivProps } from \"./lib/gen-parts\";\nimport { useVi } from \"./lib/store\";\nimport { ViChilds } from \"./vi-child\";\nimport { ViScript } from \"./vi-script\";\nimport { DIV_PROPS_OPT, ViMergedProps } from \"./lib/types\";\n\nexport const ViItem: FC<{\n  item: DeepReadonly<IItem>;\n  is_layout: boolean;\n  div_props?: (opt: DIV_PROPS_OPT) => DIV_PROPS;\n  merged?: ViMergedProps;\n  instance_id?: string;\n  standalone?: string;\n}> = ({ item, is_layout, div_props, instance_id, merged, standalone }) => {\n  const { page, mode, ref, parents } = useVi(\n    ({ state, ref, action }) => ({\n      page: ref.page,\n      db: ref.db,\n      api: ref.api,\n      mode: ref.mode,\n      ref,\n      parents: ref.item_parents,\n    }),\n    standalone\n  );\n  const [, render] = useState({});\n\n  const props = viDivProps(item, {\n    mode,\n    div_props: div_props?.({ item: item as any, ref, instance_id }),\n  });\n\n  let childs = null;\n  if (is_layout && item.name === \"children\" && page) {\n    childs = (\n      //@ts-ignore\n      <ViChilds\n        item={page.root}\n        merged={merged}\n        instance_id={instance_id}\n        is_layout={is_layout}\n        standalone={standalone}\n      />\n    );\n  } else {\n    if (item.type === \"text\") {\n      childs = null;\n      if (!item.adv?.js) {\n        props.dangerouslySetInnerHTML = { __html: item.html || \"\" };\n      } else {\n        delete props.contentEditable;\n        delete props.dangerouslySetInnerHTML;\n      }\n    } else {\n      if (item.childs) {\n        childs = (\n          <ViChilds\n            item={item}\n            instance_id={instance_id}\n            is_layout={is_layout}\n            standalone={standalone}\n            merged={merged}\n          />\n        );\n      }\n    }\n  }\n\n  if (item.adv?.js) {\n    return (\n      <ViScript\n        item={item}\n        childs={childs}\n        is_layout={is_layout}\n        merged={merged}\n        props={props}\n        instance_id={instance_id}\n        render={() => render({})}\n        standalone={standalone}\n      />\n    );\n  }\n\n  return <div {...props}>{childs ? childs : null}</div>;\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { FC } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { LoadingSpinner } from \"utils/ui/loading\";\nimport { compArgs } from \"./lib/comp-args\";\nimport { DIV_PROPS } from \"./lib/gen-parts\";\nimport { parentCompArgs } from \"./lib/parent-comp-args\";\nimport { useVi } from \"./lib/store\";\nimport { DIV_PROPS_OPT, ViMergedProps } from \"./lib/types\";\nimport { ViItem } from \"./vi-item\";\n\nexport const ViComp: FC<{\n  item: DeepReadonly<IItem>;\n  is_layout: boolean;\n  div_props?: (opt: DIV_PROPS_OPT) => DIV_PROPS;\n  merged?: ViMergedProps;\n  standalone?: string;\n}> = ({ item, is_layout, div_props, merged, standalone }) => {\n  const {\n    comps,\n    instances,\n    instantiate,\n    ref_comp_props,\n    parents,\n    db,\n    api,\n    instanced,\n    edit_comp_id,\n    vscode_exports,\n  } = useVi(\n    ({ state, ref, action }) => ({\n      comps: ref.comps,\n      load: ref.loader.comps,\n      instances: ref.comp.instances,\n      loaded: ref.comp.loaded,\n      instantiate: action.instantiateComp,\n      ref_comp_props: ref.comp_props,\n      parents: ref.item_parents,\n      db: ref.db,\n      api: ref.api,\n      instanced: ref.instanced,\n      edit_comp_id: ref.edit_comp_id,\n      vscode_exports: ref.vscode_exports,\n    }),\n    standalone\n  );\n\n  const comp_id = item.component!.id;\n  const loading_component = <LoadingSpinner />;\n\n  if (!comps[comp_id]) {\n    return loading_component;\n  } else {\n    if (\n      !instances[item.id] ||\n      instanced[item.id] !== item ||\n      edit_comp_id === comp_id\n    ) {\n      instanced[item.id] = item;\n      ref_comp_props[item.id] = compArgs(\n        item,\n        comps,\n        { ...merged },\n        db,\n        api,\n        vscode_exports,\n        standalone\n      );\n\n      instantiate(item);\n    }\n  }\n  const instance = instances[item.id];\n\n  if (!instance) return loading_component;\n\n  let instance_id: string | undefined = item.id;\n  if (edit_comp_id === comp_id) {\n    instance_id = undefined;\n  }\n\n  return (\n    <ViItem\n      item={instance as any}\n      is_layout={is_layout}\n      div_props={div_props}\n      instance_id={instance_id}\n      merged={merged}\n      standalone={standalone}\n    />\n  );\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { FC } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { ViComp } from \"./vi-comp\";\nimport { ViItem } from \"./vi-item\";\nimport { useVi } from \"./lib/store\";\nimport { DIV_PROPS } from \"./lib/gen-parts\";\nimport { DIV_PROPS_OPT, ViMergedProps } from \"./lib/types\";\n\nexport const ViRender: FC<{\n  item: DeepReadonly<IItem>;\n  is_layout: boolean;\n  div_props?: (opt: DIV_PROPS_OPT) => DIV_PROPS;\n  instance_id?: string;\n  merged?: ViMergedProps;\n  standalone?: string;\n  wrapped?: boolean;\n}> = ({\n  item,\n  is_layout,\n  div_props,\n  instance_id,\n  merged,\n  standalone,\n  wrapped,\n}) => {\n  const { wrapper } = useVi(\n    ({ ref }) => ({\n      wrapper: ref.wrapper,\n      ref,\n    }),\n    standalone\n  );\n\n  if (item.hidden) return null;\n\n  if (wrapper && !wrapped) {\n    const Wrapper = wrapper;\n\n    return (\n      <Wrapper\n        item={item as any}\n        is_layout={is_layout}\n        instance_id={instance_id}\n        merged={merged}\n        standalone={standalone}\n        ViRender={item.component?.id ? ViComp : ViItem}\n      />\n    );\n  }\n\n  if (item.component?.id) {\n    return (\n      <ViComp\n        item={item}\n        merged={merged}\n        is_layout={is_layout}\n        div_props={div_props}\n        standalone={standalone}\n      />\n    );\n  } else {\n    return (\n      <ViItem\n        item={item}\n        is_layout={is_layout}\n        div_props={div_props}\n        merged={merged}\n        instance_id={instance_id}\n        standalone={standalone}\n      />\n    );\n  }\n};\n","import { DeepReadonly } from \"popup/flow/runtime/types\";\nimport { FC } from \"react\";\nimport { IItem } from \"utils/types/item\";\nimport { ErrorBox } from \"./lib/error-box\";\nimport { useVi } from \"./lib/store\";\nimport { ViComps, ViPageRoot } from \"./lib/types\";\nimport { ViRender } from \"./vi-render\";\n\nexport const ViPage: FC<{\n  init?: { comps: ViComps; page: ViPageRoot; name: string; exports: any };\n}> = ({ init }) => {\n  const { layout, parents, ref } = useVi(\n    ({ ref }) => ({\n      page: ref.page,\n      layout: ref.layout,\n      parents: ref.item_parents,\n      ref,\n    }),\n    init?.name\n  );\n\n  let page = ref.page;\n  if (init) {\n    ref.page = init.page;\n    ref.vscode_exports = init.exports;\n    ref.comps = init.comps;\n    page = ref.page;\n  }\n\n  const is_layout = !!layout?.root;\n  const content_tree = (is_layout\n    ? layout?.root\n    : page?.root) as unknown as DeepReadonly<IItem>;\n\n  return (\n    <div className=\"flex flex-1 flex-col relative\">\n      {Array.isArray(content_tree?.childs) &&\n        content_tree.childs.map((item: DeepReadonly<IItem>) => {\n          parents[item.id] = \"root\";\n\n          return (\n            <ErrorBox key={item.id}>\n              <ViRender\n                item={item}\n                is_layout={is_layout}\n                standalone={init?.name}\n              />\n            </ErrorBox>\n          );\n        })}\n    </div>\n  );\n};\n","import { FC, Suspense } from \"react\";\nimport { ErrorBox } from \"./lib/error-box\";\nimport { viInit } from \"./lib/init-vi\";\nimport { useVi } from \"./lib/store\";\nimport { ViProp } from \"./lib/types\";\nimport { ViPage } from \"./vi-page\";\n\nexport const ViRoot: FC<ViProp> = ({\n  page,\n  comps,\n  layout,\n  loader,\n  db,\n  api,\n  mode,\n  wrapper,\n  enable_preload,\n  setRef: set_ref,\n  edit_comp_id,\n  vscode_exports,\n}) => {\n  const { syncProp, ref, resetCompInstance } = useVi(\n    ({ action, ref, state }) => ({\n      syncProp: action.syncProp,\n      ref,\n      resetCompInstance: action.resetCompInstance,\n    })\n  );\n\n  ref.vscode_exports = vscode_exports;\n  ref.resetCompInstance = resetCompInstance;\n\n  if (set_ref) set_ref(ref);\n\n  if (!ref.init) {\n    ref.init = true;\n    ref.loader.comps = loader.comps as any;\n    if (wrapper) ref.wrapper = wrapper;\n    viInit({ loader, enablePreload: !!enable_preload });\n  }\n\n  syncProp({ page, comps, layout, db, api, mode, edit_comp_id });\n\n  return (\n    <ErrorBox>\n      <Suspense>\n        <ViPage />\n      </Suspense>\n    </ErrorBox>\n  );\n};\n","import { memo } from \"react\";\nimport { ViRoot } from \"vi/vi-root\";\nimport { base } from \"../loader/base\";\nimport { loadPages } from \"../loader/page\";\nimport { w } from \"../root/window\";\nimport { useProdState } from \"./store\";\nimport { Loading } from \"utils/ui/loading\";\nimport { findRoute } from \"rou3\";\n\nexport const ProdRouter = memo(() => {\n  const {\n    router,\n    pages,\n    page,\n    loadPage,\n    update,\n    comps,\n    layout,\n    mode,\n    db,\n    api,\n    ref,\n  } = useProdState(({ ref, state, action }) => ({\n    pathname: state.pathname,\n    mode: state.mode,\n    router: ref.router,\n    pages: ref.pages,\n    loadPage: action.loadPage,\n    page: ref.page,\n    layout: ref.layout,\n    comps: ref.comps,\n    comp_status: state.status.comps,\n    ts: state.ts,\n    db: ref.db,\n    api: ref.api,\n    ref,\n  }));\n\n  const found = router\n    ? findRoute(router, undefined, base.pathname)\n    : undefined;\n\n  const found_page = router\n    ? pages?.find((e) => e.id === found?.data.id)\n    : undefined;\n\n  if (found_page) {\n    if (found_page.id !== page?.id) {\n      loadPage(found_page);\n      return <></>;\n    } else {\n      if (page && page.root) {\n        let loading_comps = false;\n        for (const id of page.root.component_ids) {\n          if (!comps[id]) {\n            return <>{w.ContentLoading ? <w.ContentLoading /> : <Loading />}</>;\n          }\n        }\n        return (\n          <>\n            <ViRoot\n              mode={mode}\n              comps={comps as any}\n              page={page as any}\n              layout={layout as any}\n              db={db}\n              api={api}\n              vscode_exports={ref.vscode_exports}\n              loader={{\n                async comps() {},\n                async pages(ids) {\n                  loadPages(ids).then((result) => {\n                    update((s) => {\n                      for (const [k, v] of Object.entries(result) as any) {\n                        if (pages[k]) {\n                          pages[k].root = v;\n                        }\n                      }\n                      s.ts = Date.now();\n                    });\n                  });\n                },\n              }}\n              enable_preload\n            />\n          </>\n        );\n      }\n    }\n  } else {\n    update((s) => {\n      ref.page = null;\n    });\n  }\n\n  if (w.ContentNotFound) {\n    return <w.ContentNotFound />;\n  }\n\n  return (\n    <div className=\"flex flex-1 items-center justify-center\">Not Found</div>\n  );\n});\n","import { Loading } from \"../../../utils/ui/loading\";\nimport { w } from \"../root/window\";\nimport { useProdState } from \"./store\";\nimport { ProdRouter } from \"./router\";\nexport const isPreview = () => {\n  return (\n    location.hostname.split(\".\").length === 4 ||\n    location.hostname === \"prasi.app\" ||\n    location.hostname === \"prasi.avolut.com\" ||\n    location.hostname.includes(\"ngrok\") ||\n    location.hostname === \"localhost\" ||\n    location.hostname === \"127.0.0.1\" ||\n    location.hostname === \"10.0.2.2\"\n  ); // android localhost\n};\n\nexport const PrasiEntry = () => {\n  const { status, init, mode, page } = useProdState(\n    ({ state: s, action: a, ref }) => ({\n      status: s.status.router,\n      mode: s.mode,\n      page: ref.page,\n      init: a.initRouter,\n    })\n  );\n  if (status === \"init\") init();\n\n  return (\n    <>\n      {status !== \"ready\" || (page && !page.root) ? (\n        <>{w.ContentLoading ? <w.ContentLoading /> : <Loading />}</>\n      ) : (\n        <div className=\"relative flex flex-1 items-center justify-center\">\n          <div\n            className={cx(\n              \"absolute flex flex-col items-stretch flex-1 bg-white main-content-preview\",\n              mode === \"mobile\"\n                ? css`\n                    @media (min-width: 1280px) {\n                      border-left: 1px solid #ccc;\n                      border-right: 1px solid #ccc;\n                      width: 375px;\n                      top: 0px;\n                      overflow-x: hidden;\n                      overflow-y: auto;\n                      bottom: 0px;\n                      contain: strict;\n                    }\n                    @media (max-width: 1279px) {\n                      left: 0px;\n                      right: 0px;\n                      top: 0px;\n                      bottom: 0px;\n                      overflow-y: auto;\n                    }\n                  `\n                : \"inset-0 overflow-auto\"\n            )}\n          >\n            <ProdRouter />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { defineReact } from \"utils/react/define-react\";\nimport { defineWindow } from \"utils/react/define-window\";\nimport \"../../../index.css\";\nimport { StoreProvider } from \"../../../utils/react/define-store\";\nimport { base } from \"../loader/base\";\nimport { PrasiEntry, isPreview } from \"../react/entry\";\nimport { w } from \"./window\";\nimport { rawProd } from \"../react/store\";\n\n(async () => {\n  import(\"./font\");\n  const div = document.getElementById(\"root\");\n\n  base.init();\n  if (div) {\n    await defineWindow(false);\n\n    let react = {\n      root: createRoot(div),\n    };\n    defineReact();\n\n    //#region prasi site internal (loading ui + not found)\n    try {\n      let internal_url = \"/internal.js\";\n      let import_url = internal_url;\n      if (location.pathname.startsWith(\"/prod\")) {\n        const patharr = location.pathname.split(\"/\");\n        import_url = `/prod/${patharr[2]}${internal_url}`;\n      }\n      let prasi_internal = false as any;\n      try {\n        const import_await = new Function(`return import(\"${import_url}\")`);\n        prasi_internal = await import_await();\n      } catch (e) {}\n\n      if (typeof prasi_internal === \"object\") {\n        if (prasi_internal.Loading) w.ContentLoading = prasi_internal.Loading;\n        if (prasi_internal.NotFound)\n          w.ContentNotFound = prasi_internal.NotFound;\n      }\n    } catch (e) {}\n    //#endregion\n\n    w.navigateOverride = (_href: string) => {\n      if (_href && _href.startsWith(\"/\")) {\n        if (isPreview()) {\n          if (\n            location.pathname.startsWith(\"/prod/\") &&\n            !_href.startsWith(\"/prod/\")\n          ) {\n            const patharr = location.pathname.split(\"/\");\n            _href = `/prod/${patharr[2]}${_href}`;\n          }\n        }\n      }\n      return _href;\n    };\n\n    w.prasiContext.render = () => {\n      rawProd().state.pathname = location.pathname;\n    };\n\n    react.root.render(\n      <StrictMode>\n        <StoreProvider>\n          <PrasiEntry />\n        </StoreProvider>\n      </StrictMode>\n    );\n    if (document.body.classList.contains(\"opacity-0\")) {\n      document.body.classList.remove(\"opacity-0\");\n    }\n  }\n})();\n"],"names":["defineReact","w","window","globalThis","React","ReactDOM","JSXRuntime","JSXDevRuntime","waitUntil","condition","arg","Promise","resolve","tout","setTimeout","clearTimeout","c","setInterval","clearInterval","defineWindow","awaitServerUrl","location","host","scheme","serverURL","URL","port","css","extractCss","classNames","result","e","Array","f","href","_href","history","sw","navigator","createContext","deepClone","decircular","default_ctx","store_ctx","StoreProvider","children","_","render","useState","defineStore","init","selector","instance_name","name","internal","useRef","init_ctx","store","useContext","proxy","ctx","ref","selection","state","useSnapshot","createAction","fn","useEffect","Object","Proxy","target","p","receiver","_key","actions","base","pathname","base_url","res","url","useLocal","data","effect","deps","local","createId","Number","LoadingSpinner","size","className","props","cx","Loading","show","backdrop","note","alt","pointer","CustomLoading","BigInt","g","global","undefined","fetchViaProxy","target_url","_headers","parse_json","headers","body","isFile","isRaw","uploadProgress","files","item","File","Uint8Array","fd","FormData","file","JSON","to_url","cur_url","final_url","encodeURIComponent","axios","fetch","raw","replacer","key","value","getProxyUrl","loadApiProxyDef","_url","with_types","trim","done","d","document","script","localStorage","Date","url_target","url_cur","is_remote","apiProxyLoaded","apiProxy","api_url","actionName","rest","fetchSendApi","gzipSync","encode","createFn","reject","api_ref","actionUrl","actionParams","idx","paramName","parseInt","console","params","schema_promise","db_mode","TextEncoder","dbProxy","dburl","is_url_valid","fetchSendDb","table","batch","bytes","btoa","acc","current","String","action","editorQueryLoaded","_params","hsum","hash_sum","isEditor","load","pack","get","set","cached","loadCachedRoute","loadRouter","router","createRouter","pages","site","layout","addRoute","loadPages","ids","page","useProdState","s","update","r","_window__prasi","_window","site_id","Function","k","v","id","pending","promise","status","json","structuredClone","_r_page","tree","mode","rawProd","ErrorBox","withErrorBoundary","error_jsx","node","silent","onError","error","resetError","useErrorBoundary","errorInfo","viInit","loader","enablePreload","urls","opt","cur","forceOriginal","useVi","Set","comp_id","_v_component","comps","db","api","edit_comp_id","compArgs","existing","vscode_exports","standalone","_item_component","_comp_component","_master_prop_meta","inject","args","master_prop","prop","js","content","parents","parent","merged","is_layout","ViRender","src","replaceWithObject","replacement","fn_src","tpl","responsiveVal","defaultVal","cssAdv","adv","cssBackground","bg","bgurl","serverurl","cssBorder","border","pick","obj","attr","notpx","val","cssDimension","editor","dim","cssEditor","hover","active","glbFont","cssFont","font","fontName","doc","link","cssLayout","cssPadding","padding","produceCSS","viDivProps","_item_adv","_item_adv1","_opt_div_props","_item_adv2","_item_adv3","ViChilds","instance_id","childs","child","rapid_secret","rapid_mix_fast","a","b","m","rapidhash_epilogue_fast","secret","len","m0","m1","read32x2View","DataView","read32x2Buffer","rapid_read32x2","buf","offset1","offset2","rapid_read64","offset","readSmallBuffer","readSmallView","textEncoder","stringLengthThresholdToUseBuffer","utf8BufferSize","utf8Buffer","parentCompArgs","ref_comps","cur_id","i","scriptArgs","IF","ViLocalAutoRender","local_render","local_value","resetLocal","local_name","valtio_version","getVersion","should_render","render_mode","Symbol","createViLocal","isValidElement","createViLoop","list","internal_item_ref","WeakMap","item_ref","item_map","index","new_key","_merged","cloneElement","createViPassProp","ViScript","comp_props_parents","dev_item_error","dev_tree_render","script_args","valtio_snapshot","cleanupAutoDispatch","cleanup","comp_args","jsx","final_args","removeRegion","defineLocal","_internal_value_arg_name_proxy","defineLoop","arg_hash","rapidhash_fast","message","options","seed","validateOptions","Error","rapidhash_internal","rapid_mix","rapidhash_epilogue","lenBI","last","delta","see1","see2","toDataView","written","utf8bytes","src_fn","end","ViItem","div_props","ViComp","instances","instantiate","ref_comp_props","instanced","loading_component","instance","_item_component1","wrapped","wrapper","Wrapper","ViPage","content_tree","ViRoot","enable_preload","set_ref","syncProp","resetCompInstance","Suspense","ProdRouter","memo","loadPage","found","findRoute","found_page","isPreview","PrasiEntry","div","react","createRoot","internal_url","import_url","patharr","prasi_internal","import_await","StrictMode"],"mappings":"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"}